<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Sistema avan√ßado de apoio emocional com IA integrada, monitoramento cont√≠nuo e interven√ß√µes personalizadas">
  <title>Apoio Emocional Avan√ßado | √Ålibis Digital</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
  <style>
    :root {
      --primary: #22d3ee;
      --secondary: #7C3AED;
      --dark: #0b1120;
      --darker: #1e1b4b;
    }
    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, var(--dark), var(--darker));
      color: white;
      position: relative;
      overflow-x: hidden;
    }
    #particles-js {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      z-index: -1;
    }
    .gradient-text {
      background: linear-gradient(45deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }
    .gradient-bg {
      background: linear-gradient(45deg, var(--secondary), var(--primary));
    }
    .glass-card {
      background: rgba(17, 24, 39, 0.85);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
    }
    .pulse-animation {
      animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34, 211, 238, 0.7); }
      70% { transform: scale(1.02); box-shadow: 0 0 0 10px rgba(34, 211, 238, 0); }
      100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34, 211, 238, 0); }
    }
    .fade-in {
      animation: fadeIn 0.5s ease-in;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .slide-up {
      animation: slideUp 0.5s ease-out;
    }
    @keyframes slideUp {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    .typing-indicator::after {
      content: '...';
      animation: typing 1.5s infinite;
    }
    @keyframes typing {
      0% { content: '.'; }
      33% { content: '..'; }
      66% { content: '...'; }
    }
    .achievement-badge {
      position: relative;
      transition: transform 0.3s;
    }
    .achievement-badge:hover {
      transform: scale(1.1);
    }
    .achievement-badge::after {
      content: '';
      position: absolute;
      top: -5px;
      left: -5px;
      right: -5px;
      bottom: -5px;
      border-radius: 50%;
      border: 2px solid var(--primary);
      opacity: 0;
      transition: opacity 0.3s;
    }
    .achievement-badge:hover::after {
      opacity: 1;
    }
  </style>
</head>
<body class="min-h-screen">
  <!-- Part√≠culas de Fundo -->
  <div id="particles-js"></div>

  <!-- Cabe√ßalho -->
  <header class="glass-card fixed top-0 left-0 w-full z-50 shadow-lg">
    <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
      <div class="flex items-center space-x-3">
        <a href="/" class="text-2xl font-bold gradient-text">√Ålibis Emocional</a>
      </div>
      <nav class="hidden md:flex space-x-6">
        <a href="#avaliacao" class="hover:text-[#22d3ee] transition">Avalia√ß√£o</a>
        <a href="#monitoramento" class="hover:text-[#22d3ee] transition">Monitoramento</a>
        <a href="#progresso" class="hover:text-[#22d3ee] transition">Progresso</a>
        <a href="#chat" class="hover:text-[#22d3ee] transition">Chat Terap√™utico</a>
      </nav>
      <button id="mobile-menu-button" class="md:hidden text-white">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
    </div>
  </header>

  <!-- Menu Mobile -->
  <div id="mobile-menu" class="glass-card fixed top-16 left-0 w-full hidden z-40 md:hidden">
    <div class="flex flex-col p-4 space-y-3">
      <a href="#avaliacao" class="py-2 px-4 hover:bg-gray-800 rounded">Avalia√ß√£o</a>
      <a href="#monitoramento" class="py-2 px-4 hover:bg-gray-800 rounded">Monitoramento</a>
      <a href="#progresso" class="py-2 px-4 hover:bg-gray-800 rounded">Progresso</a>
      <a href="#chat" class="py-2 px-4 hover:bg-gray-800 rounded">Chat Terap√™utico</a>
    </div>
  </div>

  <main class="pt-20 pb-16 px-4 max-w-7xl mx-auto">
    <!-- Se√ß√£o Hero -->
    <section class="py-12 text-center">
      <h1 class="text-4xl md:text-6xl font-bold mb-6 gradient-text">Apoio Emocional Avan√ßado</h1>
      <p class="text-xl md:text-2xl text-gray-300 max-w-3xl mx-auto mb-8">
        Seu companheiro de sa√∫de mental com IA, monitoramento cont√≠nuo e interven√ß√µes personalizadas
      </p>
      <button id="start-assessment" class="gradient-bg text-white font-bold py-3 px-8 rounded-full text-lg pulse-animation">
        Come√ßar Avalia√ß√£o
      </button>
    </section>

    <!-- Avalia√ß√£o Emocional Avan√ßada -->
    <section id="avaliacao" class="py-12 glass-card p-6 my-8">
      <h2 class="text-3xl font-bold mb-6 gradient-text">Avalia√ß√£o Multidimensional</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <!-- Question√°rio Tradicional -->
        <div>
          <h3 class="text-xl font-semibold mb-4 flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2h-1V9z" clip-rule="evenodd" />
            </svg>
            Question√°rio Psicol√≥gico
          </h3>
          <form id="emotional-assessment" class="space-y-4">
            <!-- Tela 1 -->
            <div id="screen-1" class="screen active">
              <div class="space-y-4">
                <div>
                  <label for="stress-level" class="block mb-2">N√≠vel de estresse recente</label>
                  <select id="stress-level" class="w-full bg-gray-800 border border-gray-700 rounded p-3">
                    <option value="">Selecione...</option>
                    <option value="low">Baixo</option>
                    <option value="moderate">Moderado</option>
                    <option value="high">Alto</option>
                    <option value="extreme">Extremo</option>
                  </select>
                </div>
                <div>
                  <label for="sleep-quality" class="block mb-2">Qualidade do sono</label>
                  <select id="sleep-quality" class="w-full bg-gray-800 border border-gray-700 rounded p-3">
                    <option value="">Selecione...</option>
                    <option value="excellent">Excelente</option>
                    <option value="good">Boa</option>
                    <option value="fair">Regular</option>
                    <option value="poor">Ruim</option>
                  </select>
                </div>
                <div class="flex justify-end">
                  <button type="button" onclick="nextScreen(1)" class="gradient-bg text-white py-2 px-6 rounded">
                    Pr√≥ximo
                  </button>
                </div>
              </div>
            </div>

            <!-- Tela 2 -->
            <div id="screen-2" class="screen">
              <div class="space-y-4">
                <div>
                  <label for="mood" class="block mb-2">Seu humor predominante</label>
                  <select id="mood" class="w-full bg-gray-800 border border-gray-700 rounded p-3">
                    <option value="">Selecione...</option>
                    <option value="happy">Feliz/Contente</option>
                    <option value="neutral">Neutro</option>
                    <option value="sad">Triste/Desanimado</option>
                    <option value="anxious">Ansioso/Nervoso</option>
                    <option value="angry">Irritado/Raivoso</option>
                  </select>
                </div>
                <div>
                  <label for="energy" class="block mb-2">N√≠vel de energia</label>
                  <select id="energy" class="w-full bg-gray-800 border border-gray-700 rounded p-3">
                    <option value="">Selecione...</option>
                    <option value="high">Alto</option>
                    <option value="normal">Normal</option>
                    <option value="low">Baixo</option>
                    <option value="very-low">Muito baixo</option>
                  </select>
                </div>
                <div class="flex justify-between">
                  <button type="button" onclick="prevScreen(2)" class="bg-gray-700 text-white py-2 px-6 rounded">
                    Anterior
                  </button>
                  <button type="button" onclick="nextScreen(2)" class="gradient-bg text-white py-2 px-6 rounded">
                    Pr√≥ximo
                  </button>
                </div>
              </div>
            </div>

            <!-- Tela 3 -->
            <div id="screen-3" class="screen">
              <div class="space-y-4">
                <div>
                  <label for="social-interaction" class="block mb-2">Intera√ß√£o social recente</label>
                  <select id="social-interaction" class="w-full bg-gray-800 border border-gray-700 rounded p-3">
                    <option value="">Selecione...</option>
                    <option value="increased">Aumentada</option>
                    <option value="normal">Normal</option>
                    <option value="reduced">Reduzida</option>
                    <option value="isolated">Isolamento</option>
                  </select>
                </div>
                <div>
                  <label for="physical-symptoms" class="block mb-2">Sintomas f√≠sicos</label>
                  <select id="physical-symptoms" class="w-full bg-gray-800 border border-gray-700 rounded p-3">
                    <option value="">Selecione...</option>
                    <option value="none">Nenhum</option>
                    <option value="mild">Leves</option>
                    <option value="moderate">Moderados</option>
                    <option value="severe">Severos</option>
                  </select>
                </div>
                <div class="flex justify-between">
                  <button type="button" onclick="prevScreen(3)" class="bg-gray-700 text-white py-2 px-6 rounded">
                    Anterior
                  </button>
                  <button type="button" onclick="nextScreen(3)" class="gradient-bg text-white py-2 px-6 rounded">
                    Pr√≥ximo
                  </button>
                </div>
              </div>
            </div>

            <!-- Tela 4 -->
            <div id="screen-4" class="screen">
              <div class="space-y-4">
                <div>
                  <label for="coping" class="block mb-2">Estrat√©gias de enfrentamento</label>
                  <select id="coping" class="w-full bg-gray-800 border border-gray-700 rounded p-3">
                    <option value="">Selecione...</option>
                    <option value="healthy">Saud√°veis (exerc√≠cio, medita√ß√£o)</option>
                    <option value="mixed">Mistas (algumas saud√°veis)</option>
                    <option value="unhealthy">Pouco saud√°veis (evita√ß√£o, subst√¢ncias)</option>
                  </select>
                </div>
                <div>
                  <label for="free-text" class="block mb-2">Descreva seus sentimentos</label>
                  <textarea id="free-text" rows="4" class="w-full bg-gray-800 border border-gray-700 rounded p-3" placeholder="Como voc√™ est√° se sentindo hoje?"></textarea>
                </div>
                <div class="flex justify-between">
                  <button type="button" onclick="prevScreen(4)" class="bg-gray-700 text-white py-2 px-6 rounded">
                    Anterior
                  </button>
                  <button type="submit" class="gradient-bg text-white py-2 px-6 rounded">
                    Obter Diagn√≥stico
                  </button>
                </div>
              </div>
            </div>
          </form>
        </div>

        <!-- Scanner Emocional Integrado -->
        <div>
          <h3 class="text-xl font-semibold mb-4 flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" />
            </svg>
            Scanner Emocional
          </h3>
          <div class="glass-card p-4 rounded-lg mb-4">
            <div id="scanner-container" class="text-center">
              <div class="h-48 flex items-center justify-center">
                <button id="start-scanner" class="gradient-bg text-white font-bold py-3 px-6 rounded-full">
                  Ativar Scanner Facial
                </button>
              </div>
              <canvas id="scanner-canvas" class="hidden w-full rounded border border-gray-700"></canvas>
              <div id="scanner-results" class="hidden mt-4">
                <h4 class="font-semibold mb-2">Resultados do Scanner:</h4>
                <div class="grid grid-cols-2 gap-2">
                  <div>Felicidade: <span id="happiness-score">0</span>%</div>
                  <div>Tristeza: <span id="sadness-score">0</span>%</div>
                  <div>Raiva: <span id="anger-score">0</span>%</div>
                  <div>Surpresa: <span id="surprise-score">0</span>%</div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- An√°lise de Voz -->
          <h4 class="font-semibold mb-2 mt-6 flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z" clip-rule="evenodd" />
            </svg>
            An√°lise de Voz
          </h4>
          <div class="glass-card p-4 rounded-lg">
            <div id="voice-analysis" class="text-center">
              <button id="start-voice-analysis" class="gradient-bg text-white font-bold py-2 px-4 rounded-full mb-2">
                Gravar An√°lise
              </button>
              <div id="voice-results" class="hidden">
                <div class="grid grid-cols-2 gap-2 text-sm">
                  <div>Tono: <span id="tone-result">Neutro</span></div>
                  <div>Velocidade: <span id="speed-result">Normal</span></div>
                  <div>Estresse Vocal: <span id="stress-result">Baixo</span></div>
                  <div>Emo√ß√£o Detectada: <span id="emotion-result">Neutra</span></div>
                </div>
              </div>
              <div id="voice-visualizer" class="mt-2 h-16 hidden">
                <canvas id="voice-waveform" class="w-full h-full"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Resultados da Avalia√ß√£o -->
      <div id="assessment-results" class="hidden mt-8 glass-card p-6">
        <h3 class="text-2xl font-bold mb-4 gradient-text">Seu Diagn√≥stico Integrado</h3>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="bg-gray-800 p-4 rounded-lg">
            <h4 class="font-semibold mb-2">Estado Emocional</h4>
            <div id="emotional-state" class="h-32">
              <!-- Gr√°fico ser√° inserido aqui -->
            </div>
          </div>
          <div class="bg-gray-800 p-4 rounded-lg">
            <h4 class="font-semibold mb-2">Recomenda√ß√µes</h4>
            <ul id="recommendations" class="list-disc pl-5 space-y-1">
              <!-- Recomenda√ß√µes ser√£o inseridas aqui -->
            </ul>
          </div>
          <div class="bg-gray-800 p-4 rounded-lg">
            <h4 class="font-semibold mb-2">Plano de A√ß√£o</h4>
            <div id="action-plan">
              <!-- Plano de a√ß√£o ser√° inserido aqui -->
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Monitoramento Cont√≠nuo -->
    <section id="monitoramento" class="py-12 glass-card p-6 my-8">
      <h2 class="text-3xl font-bold mb-6 gradient-text">Monitoramento Cont√≠nuo</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- Integra√ß√£o com Wearables -->
        <div class="glass-card p-6">
          <h3 class="font-semibold mb-4 flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd" />
            </svg>
            Dados Biom√©tricos
          </h3>
          <div id="biometric-data" class="space-y-3">
            <div class="flex justify-between items-center">
              <span>Frequ√™ncia Card√≠aca:</span>
              <span id="heart-rate" class="font-semibold">-- bpm</span>
            </div>
            <div class="flex justify-between items-center">
              <span>Variabilidade:</span>
              <span id="hrv" class="font-semibold">-- ms</span>
            </div>
            <div class="flex justify-between items-center">
              <span>N√≠vel de Estresse:</span>
              <span id="stress-level" class="font-semibold">--</span>
            </div>
            <div class="flex justify-between items-center">
              <span>Qualidade do Sono:</span>
              <span id="sleep-quality" class="font-semibold">--</span>
            </div>
          </div>
          <button id="connect-wearable" class="gradient-bg text-white w-full mt-4 py-2 px-4 rounded">
            Conectar Dispositivo
          </button>
          <div id="wearable-status" class="text-sm mt-2 text-gray-400"></div>
        </div>
        
        <!-- Di√°rio Emocional -->
        <div class="glass-card p-6">
          <h3 class="font-semibold mb-4 flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2h-1V9z" clip-rule="evenodd" />
            </svg>
            Di√°rio Emocional
          </h3>
          <textarea id="emotional-journal" class="w-full bg-gray-800 border border-gray-700 rounded p-3 mb-3 h-32" placeholder="Como voc√™ est√° se sentindo hoje?"></textarea>
          <button id="analyze-journal" class="gradient-bg text-white w-full py-2 px-4 rounded mb-2">
            Analisar Sentimentos
          </button>
          <button id="add-mood" class="bg-gray-700 text-white w-full py-2 px-4 rounded">
            Registrar Humor Atual
          </button>
          <div id="journal-insights" class="mt-3 text-sm hidden"></div>
        </div>
        
        <!-- Tend√™ncias e Alertas -->
        <div class="glass-card p-6">
          <h3 class="font-semibold mb-4 flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M12 1.586l-4 4v12.828l4-4V1.586zM3.707 3.293A1 1 0 002 4v10a1 1 0 00.293.707L6 18.414V5.586L3.707 3.293zM17.707 5.293L14 1.586v12.828l2.293 2.293A1 1 0 0018 16V6a1 1 0 00-.293-.707z" clip-rule="evenodd" />
            </svg>
            Tend√™ncias Emocionais
          </h3>
          <div id="trends-chart" class="h-48 mb-3">
            <!-- Gr√°fico ser√° renderizado aqui -->
          </div>
          <div id="alerts-container" class="space-y-2">
            <div class="text-sm p-2 bg-yellow-900 bg-opacity-50 rounded hidden" id="stress-alert">
              <strong>Alerta de Estresse:</strong> Seus n√≠veis est√£o elevados
            </div>
            <div class="text-sm p-2 bg-blue-900 bg-opacity-50 rounded hidden" id="sleep-alert">
              <strong>Padr√£o de Sono:</strong> Qualidade abaixo do normal
            </div>
            <div class="text-sm p-2 bg-red-900 bg-opacity-50 rounded hidden" id="mood-alert">
              <strong>Mood Swing:</strong> Varia√ß√µes significativas detectadas
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Sistema de Interven√ß√£o -->
    <section class="py-12 glass-card p-6 my-8">
      <h2 class="text-3xl font-bold mb-6 gradient-text">Interven√ß√µes Proativas</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Interven√ß√µes Ativas -->
        <div class="glass-card p-6">
          <h3 class="font-semibold mb-4">Interven√ß√µes Sugeridas</h3>
          <div id="interventions-list" class="space-y-3">
            <div class="p-3 bg-gray-800 rounded-lg hidden" id="breathing-exercise">
              <div class="flex justify-between items-center">
                <h4 class="font-medium">Exerc√≠cio de Respira√ß√£o</h4>
                <button class="text-xs gradient-bg text-white py-1 px-2 rounded">
                  Iniciar
                </button>
              </div>
              <p class="text-sm mt-1 text-gray-400">Para reduzir o estresse imediato</p>
            </div>
            <div class="p-3 bg-gray-800 rounded-lg hidden" id="mindfulness-session">
              <div class="flex justify-between items-center">
                <h4 class="font-medium">Sess√£o de Mindfulness</h4>
                <button class="text-xs gradient-bg text-white py-1 px-2 rounded">
                  Iniciar
                </button>
              </div>
              <p class="text-sm mt-1 text-gray-400">5 minutos para centrar-se</p>
            </div>
            <div class="p-3 bg-gray-800 rounded-lg hidden" id="activity-suggestion">
              <div class="flex justify-between items-center">
                <h4 class="font-medium">Sugest√£o de Atividade</h4>
                <button class="text-xs gradient-bg text-white py-1 px-2 rounded">
                  Ver
                </button>
              </div>
              <p class="text-sm mt-1 text-gray-400">Baseado no seu estado atual</p>
            </div>
          </div>
        </div>
        
        <!-- Hist√≥rico de Interven√ß√µes -->
        <div class="glass-card p-6">
          <h3 class="font-semibold mb-4">Seu Hist√≥rico</h3>
          <div id="intervention-history" class="space-y-2 max-h-64 overflow-y-auto">
            <!-- Hist√≥rico ser√° preenchido dinamicamente -->
          </div>
        </div>
      </div>
    </section>

    <!-- Painel de Progresso -->
    <section id="progresso" class="py-12 glass-card p-6 my-8">
      <h2 class="text-3xl font-bold mb-6 gradient-text">Sua Jornada Emocional</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
        <!-- Mapa de Progresso -->
        <div class="glass-card p-6">
          <h3 class="font-semibold mb-4">Mapa de Progresso</h3>
          <div id="progress-map" class="h-64">
            <!-- Visualiza√ß√£o interativa da jornada -->
          </div>
        </div>
        
        <!-- Conquistas -->
        <div class="glass-card p-6">
          <h3 class="font-semibold mb-4">Conquistas</h3>
          <div id="achievements" class="grid grid-cols-3 gap-3">
            <div class="achievement-badge text-center p-2">
              <div class="mx-auto bg-gray-700 rounded-full w-12 h-12 flex items-center justify-center mb-1">
                <span>üèÜ</span>
              </div>
              <span class="text-xs">Primeiros Passos</span>
            </div>
            <div class="achievement-badge text-center p-2 opacity-50">
              <div class="mx-auto bg-gray-800 rounded-full w-12 h-12 flex items-center justify-center mb-1">
                <span>üìù</span>
              </div>
              <span class="text-xs">Di√°rio 7 Dias</span>
            </div>
            <div class="achievement-badge text-center p-2 opacity-50">
              <div class="mx-auto bg-gray-800 rounded-full w-12 h-12 flex items-center justify-center mb-1">
                <span>üòå</span>
              </div>
              <span class="text-xs">Mestre Relax.</span>
            </div>
            <div class="achievement-badge text-center p-2 opacity-50">
              <div class="mx-auto bg-gray-800 rounded-full w-12 h-12 flex items-center justify-center mb-1">
                <span>üß†</span>
              </div>
              <span class="text-xs">Mindfulness</span>
            </div>
            <div class="achievement-badge text-center p-2 opacity-50">
              <div class="mx-auto bg-gray-800 rounded-full w-12 h-12 flex items-center justify-center mb-1">
                <span>üìä</span>
              </div>
              <span class="text-xs">Analista</span>
            </div>
            <div class="achievement-badge text-center p-2 opacity-50">
              <div class="mx-auto bg-gray-800 rounded-full w-12 h-12 flex items-center justify-center mb-1">
                <span>üí™</span>
              </div>
              <span class="text-xs">Resili√™ncia</span>
            </div>
          </div>
          <div id="next-milestones" class="mt-4 text-sm">
            <h4 class="font-medium mb-2">Pr√≥ximas Metas:</h4>
            <ul class="list-disc pl-5 space-y-1">
              <li>Completar 3 avalia√ß√µes semanais</li>
              <li>Experimentar 2 t√©cnicas novas</li>
              <li>Manter di√°rio por 3 dias consecutivos</li>
            </ul>
          </div>
        </div>
      </div>
      
      <!-- Relat√≥rio Semanal -->
      <div class="glass-card p-6">
        <div class="flex justify-between items-center mb-4">
          <h3 class="font-semibold">Seu Relat√≥rio Semanal</h3>
          <button id="generate-report" class="gradient-bg text-white py-2 px-4 rounded text-sm">
            Gerar Relat√≥rio
          </button>
        </div>
        <div id="weekly-report" class="hidden">
          <!-- Relat√≥rio ser√° gerado dinamicamente -->
        </div>
      </div>
    </section>

    <!-- Chat Terap√™utico Avan√ßado -->
    <section id="chat" class="py-12 glass-card p-6 my-8">
      <h2 class="text-3xl font-bold mb-6 gradient-text">Chat Terap√™utico</h2>
      
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- Configura√ß√µes do Chat -->
        <div class="glass-card p-6">
          <h3 class="font-semibold mb-4">Configura√ß√µes</h3>
          <div class="space-y-4">
            <div>
              <label class="block mb-2">Abordagem Terap√™utica</label>
              <select id="therapy-approach" class="w-full bg-gray-800 border border-gray-700 rounded p-2">
                <option value="cbt">TCC - Terapia Cognitivo-Comportamental</option>
                <option value="act">ACT - Terapia de Aceita√ß√£o e Compromisso</option>
                <option value="mindfulness">Mindfulness</option>
                <option value="supportive">Apoio Emocional</option>
              </select>
            </div>
            <div>
              <label class="block mb-2">Estilo do Terapeuta</label>
              <select id="therapist-style" class="w-full bg-gray-800 border border-gray-700 rounded p-2">
                <option value="warm">Acolhedor/Emp√°tico</option>
                <option value="direct">Direto/Objetivo</option>
                <option value="professional">Profissional/Neutro</option>
                <option value="friendly">Amig√°vel/Descontra√≠do</option>
              </select>
            </div>
            <div>
              <label class="flex items-center">
                <input type="checkbox" id="voice-enabled" class="mr-2" checked>
                <span>Ativar Voz</span>
              </label>
            </div>
            <button id="apply-settings" class="gradient-bg text-white w-full py-2 px-4 rounded mt-2">
              Aplicar Configura√ß√µes
            </button>
          </div>
        </div>
        
        <!-- Chat Principal -->
        <div class="md:col-span-2 glass-card p-0 overflow-hidden">
          <div id="chat-container" class="h-96 flex flex-col">
            <div id="chat-header" class="bg-gray-800 p-4 border-b border-gray-700">
              <h3 class="font-semibold flex items-center">
                <span id="therapist-avatar" class="w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center mr-2">T</span>
                <span id="therapist-name">Terapeuta Virtual</span>
              </h3>
            </div>
            <div id="chat-messages" class="flex-1 p-4 overflow-y-auto space-y-3">
              <div class="flex justify-start">
                <div class="bg-gray-800 rounded-lg p-3 max-w-xs md:max-w-md">
                  <p>Ol√°! Sou seu terapeuta virtual. Como posso te ajudar hoje?</p>
                </div>
              </div>
            </div>
            <div class="p-3 border-t border-gray-700 bg-gray-800">
              <div class="flex">
                <input id="chat-input" type="text" placeholder="Digite sua mensagem..." class="flex-1 bg-gray-700 border border-gray-600 rounded-l-lg p-2 focus:outline-none focus:border-blue-500">
                <button id="send-message" class="gradient-bg text-white px-4 rounded-r-lg">
                  Enviar
                </button>
              </div>
              <div class="flex justify-center mt-2">
                <button id="start-voice-chat" class="text-xs flex items-center bg-gray-700 text-white py-1 px-3 rounded">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z" clip-rule="evenodd" />
                  </svg>
                  Falar
                </button>
              </div>
              <div id="typing-indicator" class="text-sm text-gray-500 mt-1 hidden">
                <span id="therapist-name">Terapeuta Virtual</span> est√° digitando<span class="typing-indicator"></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Rodap√© -->
  <footer class="bg-gray-900 py-8 px-4">
    <div class="max-w-7xl mx-auto">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <div>
          <h3 class="text-xl font-bold gradient-text mb-4">√Ålibis Emocional</h3>
          <p class="text-gray-400">Sua plataforma avan√ßada de sa√∫de mental e bem-estar emocional.</p>
        </div>
        <div>
          <h4 class="font-semibold mb-3">Links R√°pidos</h4>
          <ul class="space-y-2">
            <li><a href="#avaliacao" class="text-gray-400 hover:text-white">Avalia√ß√£o</a></li>
            <li><a href="#monitoramento" class="text-gray-400 hover:text-white">Monitoramento</a></li>
            <li><a href="#progresso" class="text-gray-400 hover:text-white">Progresso</a></li>
            <li><a href="#chat" class="text-gray-400 hover:text-white">Chat Terap√™utico</a></li>
          </ul>
        </div>
        <div>
          <h4 class="font-semibold mb-3">Contato</h4>
          <ul class="space-y-2 text-gray-400">
            <li>suporte@alibisemocional.com</li>
            <li>(11) 91234-5678</li>
          </ul>
        </div>
      </div>
      <div class="border-t border-gray-800 mt-8 pt-6 text-center text-gray-500 text-sm">
        ¬© 2025 √Ålibis Digital. Todos os direitos reservados.
      </div>
    </div>
  </footer>

  <!-- Modal de Interven√ß√£o -->
  <div id="intervention-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="glass-card p-6 max-w-md w-full mx-4">
      <h3 id="intervention-title" class="text-xl font-bold mb-4"></h3>
      <div id="intervention-content" class="mb-4"></div>
      <div class="flex justify-end space-x-3">
        <button id="cancel-intervention" class="bg-gray-700 text-white py-2 px-4 rounded">
          Fechar
        </button>
        <button id="start-intervention" class="gradient-bg text-white py-2 px-4 rounded">
          Come√ßar
        </button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    // Configura√ß√£o Inicial
    document.addEventListener('DOMContentLoaded', function() {
      // Inicializar part√≠culas
      particlesJS('particles-js', {
        particles: {
          number: { value: 80, density: { enable: true, value_area: 800 } },
          color: { value: ['#22d3ee', '#7C3AED', '#ffffff'] },
          shape: { type: 'circle' },
          opacity: { value: 0.5, random: true },
          size: { value: 3, random: true },
          line_linked: { enable: true, distance: 150, color: '#22d3ee', opacity: 0.4, width: 1 },
          move: { enable: true, speed: 3, direction: 'none', random: true, straight: false, out_mode: 'out' }
        },
        interactivity: {
          detect_on: 'canvas',
          events: {
            onhover: { enable: true, mode: 'bubble' },
            onclick: { enable: true, mode: 'push' }
          },
          modes: {
            bubble: { distance: 200, size: 6, duration: 2, opacity: 0.8, speed: 3 },
            push: { particles_nb: 4 }
          }
        }
      });

      // Menu Mobile
      const mobileMenuButton = document.getElementById('mobile-menu-button');
      const mobileMenu = document.getElementById('mobile-menu');
      
      mobileMenuButton.addEventListener('click', function() {
        mobileMenu.classList.toggle('hidden');
      });

      // Navega√ß√£o entre telas do question√°rio
      window.nextScreen = function(current) {
        document.getElementById(`screen-${current}`).classList.remove('active');
        document.getElementById(`screen-${current + 1}`).classList.add('active');
      };

      window.prevScreen = function(current) {
        document.getElementById(`screen-${current}`).classList.remove('active');
        document.getElementById(`screen-${current - 1}`).classList.add('active');
      };

      // Formul√°rio de avalia√ß√£o
      const assessmentForm = document.getElementById('emotional-assessment');
      assessmentForm.addEventListener('submit', function(e) {
        e.preventDefault();
        generateAssessmentResults();
      });

      // Bot√£o Come√ßar Avalia√ß√£o
      document.getElementById('start-assessment').addEventListener('click', function() {
        document.getElementById('avaliacao').scrollIntoView({ behavior: 'smooth' });
      });

      // Inicializar Chat Terap√™utico
      initTherapeuticChat();

      // Inicializar Monitoramento
      initMonitoringSystem();

      // Inicializar Sistema de Interven√ß√£o
      initInterventionSystem();

      // Inicializar Painel de Progresso
      initProgressDashboard();
    });
//==================== CHATBOT TERAP√äUTICO AVAN√áADO (CORRIGIDO) ====================
function initTherapeuticChat() {
  const chatInput = document.getElementById('chat-input');
  const sendButton = document.getElementById('send-message');
  const chatMessages = document.getElementById('chat-messages');
  const voiceButton = document.getElementById('start-voice-chat');
  const typingIndicator = document.getElementById('typing-indicator');
  const therapyApproach = document.getElementById('therapy-approach');
  const therapistStyle = document.getElementById('therapist-style');
  const voiceEnabled = document.getElementById('voice-enabled');
  const applySettings = document.getElementById('apply-settings');
  
  let currentApproach = 'cbt';
  let currentStyle = 'warm';
  let isVoiceEnabled = true;
  let conversationHistory = [];
  let currentTopic = '';
  let userName = '';
  
  // Configura√ß√µes do Chat - Atualizado
  applySettings.addEventListener('click', function() {
    currentApproach = therapyApproach.value;
    currentStyle = therapistStyle.value;
    isVoiceEnabled = voiceEnabled.checked;
    
    updateTherapistProfile();
    showFeedback('Configura√ß√µes aplicadas com sucesso!');
  });
  
  // Perfil do Terapeuta - Melhorado
  function updateTherapistProfile() {
    const therapistName = document.getElementById('therapist-name');
    const therapistAvatar = document.getElementById('therapist-avatar');
    
    const profiles = {
      cbt: { 
        name: 'Dr. Silva (TCC)', 
        color: 'bg-blue-600',
        specialty: 'Terapia Cognitivo-Comportamental'
      },
      act: { 
        name: 'Dra. Costa (ACT)', 
        color: 'bg-purple-600',
        specialty: 'Terapia de Aceita√ß√£o e Compromisso'
      },
      mindfulness: { 
        name: 'Instrutor Paz', 
        color: 'bg-green-600',
        specialty: 'Mindfulness e Medita√ß√£o'
      },
      supportive: { 
        name: 'Apoiador Emocional', 
        color: 'bg-pink-600',
        specialty: 'Apoio Emocional'
      }
    };
    
    const profile = profiles[currentApproach];
    therapistName.textContent = profile.name;
    therapistAvatar.className = `w-8 h-8 rounded-full ${profile.color} flex items-center justify-center mr-2`;
    
    // Adiciona mensagem de introdu√ß√£o quando muda o terapeuta
    addSystemMessage(`Ol√°! Sou seu terapeuta virtual especializado em ${profile.specialty}. Como posso te ajudar hoje?`);
  }
  
  // Mensagens do Sistema - Novo
  function addSystemMessage(text) {
    const messageDiv = document.createElement('div');
    messageDiv.className = 'flex justify-start';
    
    const bubble = document.createElement('div');
    bubble.className = 'bg-gray-800 rounded-lg p-3 max-w-xs md:max-w-md';
    bubble.innerHTML = `<p>${text}</p>`;
    
    messageDiv.appendChild(bubble);
    chatMessages.appendChild(messageDiv);
    chatMessages.scrollTop = chatMessages.scrollHeight;
    
    // Adiciona ao hist√≥rico
    conversationHistory.push({
      role: 'system',
      content: text,
      timestamp: new Date().toISOString()
    });
    
    // Fala a mensagem se voz estiver ativada
    if (isVoiceEnabled) {
      speak(text);
    }
  }
  
  // Enviar Mensagem - Atualizado
  function sendMessage() {
    const message = chatInput.value.trim();
    if (message === '') return;
    
    // Adiciona mensagem do usu√°rio
    addUserMessage(message);
    chatInput.value = '';
    
    // Processa a mensagem
    processUserMessage(message);
  }
  
  // Adicionar Mensagem do Usu√°rio - Novo
  function addUserMessage(text) {
    const messageDiv = document.createElement('div');
    messageDiv.className = 'flex justify-end';
    
    const bubble = document.createElement('div');
    bubble.className = 'bg-blue-600 rounded-lg p-3 max-w-xs md:max-w-md';
    bubble.textContent = text;
    
    messageDiv.appendChild(bubble);
    chatMessages.appendChild(messageDiv);
    chatMessages.scrollTop = chatMessages.scrollHeight;
    
    // Adiciona ao hist√≥rico
    conversationHistory.push({
      role: 'user',
      content: text,
      timestamp: new Date().toISOString()
    });
  }
  
  // Processar Mensagem do Usu√°rio - Melhorado
  function processUserMessage(message) {
    const lowerMessage = message.toLowerCase();
    
    // Detec√ß√£o de nome
    if (!userName && (lowerMessage.includes('meu nome √©') || lowerMessage.includes('eu sou'))) {
      const nameMatch = message.match(/(?:meu nome √©|eu sou)\s+([^\s,.]+)/i);
      if (nameMatch && nameMatch[1]) {
        userName = nameMatch[1];
        addSystemMessage(`Prazer em te conhecer, ${userName}! Como voc√™ est√° se sentindo hoje?`);
        return;
      }
    }
    
    // Mostrar indicador de digita√ß√£o
    typingIndicator.classList.remove('hidden');
    
    // Simular tempo de processamento
    setTimeout(() => {
      typingIndicator.classList.add('hidden');
      
      // Gerar resposta baseada no contexto
      const response = generateTherapeuticResponse(message);
      addSystemMessage(response);
    }, 1000 + Math.random() * 1500);
  }
  
  // Gerar Resposta Terap√™utica - Melhorado
  function generateTherapeuticResponse(message) {
    const lowerMessage = message.toLowerCase();
    let response = '';
    
    // Mant√©m o t√≥pico da conversa
    if (currentTopic && !lowerMessage.includes('mudar') && !lowerMessage.includes('outro')) {
      return continueCurrentTopic(message);
    }
    
    // Respostas baseadas na abordagem
    if (currentApproach === 'cbt') {
      if (lowerMessage.includes('ansios') || lowerMessage.includes('nervos')) {
        currentTopic = 'ansiedade';
        response = `Entendo que voc√™ est√° se sentindo ansioso. ${userName ? userName + ', ' : ''}voc√™ consegue identificar o que desencadeia essa ansiedade?`;
      } else if (lowerMessage.includes('trist') || lowerMessage.includes('deprim')) {
        currentTopic = 'tristeza';
        response = `A tristeza pode ser dif√≠cil. ${userName ? userName + ', ' : ''}quanto tempo voc√™ est√° se sentindo assim?`;
      } else if (lowerMessage.includes('estress') || lowerMessage.includes('sobrecarreg')) {
        currentTopic = 'estresse';
        response = `O estresse pode ser desafiador. ${userName ? userName + ', ' : ''}como isso est√° afetando sua rotina?`;
      } else if (lowerMessage.includes('raiva') || lowerMessage.includes('bravo')) {
        currentTopic = 'raiva';
        response = `A raiva √© uma emo√ß√£o v√°lida. ${userName ? userName + ', ' : ''}o que aconteceu antes de voc√™ se sentir assim?`;
      } else {
        currentTopic = 'explorar';
        response = `Interessante. ${userName ? userName + ', ' : ''}como esses pensamentos afetam seu dia a dia?`;
      }
    } else if (currentApproach === 'act') {
      if (lowerMessage.includes('ansios') || lowerMessage.includes('nervos')) {
        currentTopic = 'ansiedade';
        response = `A ansiedade pode ser desconfort√°vel. ${userName ? userName + ', ' : ''}o que √© mais importante para voc√™ mesmo com essa ansiedade presente?`;
      } else if (lowerMessage.includes('trist') || lowerMessage.includes('deprim')) {
        currentTopic = 'tristeza';
        response = `A tristeza faz parte da experi√™ncia humana. ${userName ? userName + ', ' : ''}quais valores s√£o importantes para voc√™ nesse momento?`;
      } else if (lowerMessage.includes('estress') || lowerMessage.includes('sobrecarreg')) {
        currentTopic = 'estresse';
        response = `O estresse pode nos afastar do que importa. ${userName ? userName + ', ' : ''}quais atividades te conectam com seus valores?`;
      } else {
        currentTopic = 'valores';
        response = `Obrigado por compartilhar. ${userName ? userName + ', ' : ''}como voc√™ pode agir de acordo com seus valores diante disso?`;
      }
    } else if (currentApproach === 'mindfulness') {
      currentTopic = 'mindfulness';
      response = `Observe esse sentimento sem julgamento. ${userName ? userName + ', ' : ''}o que voc√™ nota no seu corpo e mente agora?`;
    } else {
      if (lowerMessage.includes('ansios') || lowerMessage.includes('nervos') || 
          lowerMessage.includes('trist') || lowerMessage.includes('deprim') || 
          lowerMessage.includes('estress') || lowerMessage.includes('sobrecarreg')) {
        currentTopic = 'apoio';
        response = `Parece que voc√™ est√° passando por um momento dif√≠cil. ${userName ? userName + ', ' : ''}quer falar mais sobre como est√° se sentindo?`;
      } else {
        currentTopic = 'escuta';
        response = `Obrigado por compartilhar. ${userName ? userName + ', ' : ''}como posso te apoiar melhor?`;
      }
    }
    
    // Ajusta estilo conforme configura√ß√£o
    response = adjustResponseStyle(response);
    
    return response;
  }
  
  // Continuar T√≥pico Atual - Novo
  function continueCurrentTopic(message) {
    const lowerMessage = message.toLowerCase();
    let response = '';
    
    if (currentTopic === 'ansiedade') {
      if (lowerMessage.includes('n√£o sei') || lowerMessage.includes('incerto')) {
        response = 'Tudo bem n√£o saber de imediato. Vamos tentar identificar juntos?';
      } else {
        response = 'Como esses pensamentos afetam seu comportamento?';
      }
    } else if (currentTopic === 'tristeza') {
      if (lowerMessage.includes('dias') || lowerMessage.includes('semanas')) {
        response = 'Esse tempo j√° √© significativo. Voc√™ tem algum apoio durante esse per√≠odo?';
      } else {
        response = 'O que normalmente te traz conforto ou alegria?';
      }
    } else if (currentTopic === 'estresse') {
      if (lowerMessage.includes('trabalho') || lowerMessage.includes('emprego')) {
        response = 'O estresse no trabalho √© comum. Voc√™ consegue estabelecer limites?';
      } else {
        response = 'Quais estrat√©gias voc√™ j√° tentou para lidar com isso?';
      }
    } else {
      response = 'Podemos explorar mais esse t√≥pico ou prefere mudar de assunto?';
    }
    
    return adjustResponseStyle(response);
  }
  
  // Ajustar Estilo da Resposta - Novo
  function adjustResponseStyle(response) {
    if (currentStyle === 'direct') {
      response = response.replace('Entendo que', 'Voc√™ est√°');
      response = response.replace('pode ser', '√©');
      response = response.replace('Parece que', 'Voc√™ est√°');
      response = response.replace('tente', 'fa√ßa');
    } else if (currentStyle === 'friendly') {
      response = response.replace('Entendo que', 'Ent√£o voc√™ t√°');
      response = response.replace('Parece que', 'Pelo que entendi');
      response = response + ' Me conta mais!';
    } else if (currentStyle === 'professional') {
      response = response.replace('t√°', 'est√°');
      response = response.replace('pra', 'para');
    }
    
    return response;
  }
  
  // Reconhecimento de Voz - Melhorado
  function setupVoiceRecognition() {
    if (!('webkitSpeechRecognition' in window)) {
      voiceButton.disabled = true;
      voiceButton.title = 'Reconhecimento de voz n√£o suportado no seu navegador';
      return;
    }
    
    const recognition = new webkitSpeechRecognition();
    recognition.continuous = false;
    recognition.interimResults = false;
    recognition.lang = 'pt-BR';
    
    voiceButton.addEventListener('click', function() {
      if (voiceButton.classList.contains('recording')) {
        recognition.stop();
        return;
      }
      
      recognition.start();
      voiceButton.classList.add('recording', 'bg-red-600');
      voiceButton.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1 animate-pulse" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z" clip-rule="evenodd" /></svg> Gravando (clique para parar)';
      
      recognition.onresult = function(event) {
        const transcript = event.results[0][0].transcript;
        chatInput.value = transcript;
        sendMessage();
      };
      
      recognition.onerror = function(event) {
        console.error('Erro no reconhecimento de voz:', event.error);
        resetVoiceButton();
        showFeedback('Erro ao gravar. Tente novamente.');
      };
      
      recognition.onend = function() {
        resetVoiceButton();
      };
    });
  }
  
  function resetVoiceButton() {
    voiceButton.classList.remove('recording', 'bg-red-600');
    voiceButton.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z" clip-rule="evenodd" /></svg> Falar';
  }
  
  // S√≠ntese de Voz - Melhorado
  function speak(text) {
    if (!('speechSynthesis' in window)) {
      console.warn('S√≠ntese de voz n√£o suportada');
      return;
    }
    
    // Cancela fala anterior
    window.speechSynthesis.cancel();
    
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = 'pt-BR';
    utterance.rate = 0.9;
    utterance.pitch = 1.0;
    
    // Tenta encontrar uma voz em portugu√™s
    const voices = speechSynthesis.getVoices();
    const ptVoice = voices.find(v => v.lang.startsWith('pt-')) || voices[0];
    if (ptVoice) utterance.voice = ptVoice;
    
    window.speechSynthesis.speak(utterance);
  }
  
  // Carregar vozes quando dispon√≠veis
  if ('speechSynthesis' in window) {
    speechSynthesis.onvoiceschanged = function() {
      // Vozes carregadas
    };
  }
  
  // Feedback Visual - Novo
  function showFeedback(message) {
    const feedback = document.createElement('div');
    feedback.className = 'fixed bottom-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg animate-fade-in';
    feedback.textContent = message;
    document.body.appendChild(feedback);
    
    setTimeout(() => {
      feedback.classList.add('opacity-0', 'transition-opacity', 'duration-500');
      setTimeout(() => feedback.remove(), 500);
    }, 2000);
  }
  
  // Event Listeners
  sendButton.addEventListener('click', sendMessage);
  chatInput.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
      sendMessage();
    }
  });
  
  // Configurar reconhecimento de voz
  setupVoiceRecognition();
  
  // Mensagem inicial
  setTimeout(() => {
    addSystemMessage('Ol√°! Sou seu terapeuta virtual. Como posso te chamar?');
  }, 1000);
}

    // ==================== FASE 2: Scanner Emocional Integrado ====================
    function initEmotionalScanner() {
      const startScannerBtn = document.getElementById('start-scanner');
      const scannerCanvas = document.getElementById('scanner-canvas');
      const scannerResults = document.getElementById('scanner-results');
      
      startScannerBtn.addEventListener('click', function() {
        startScannerBtn.classList.add('hidden');
        scannerCanvas.classList.remove('hidden');
        scannerResults.classList.remove('hidden');
        
        // Simular an√°lise facial (em um sistema real, isso usaria a API de c√¢mera)
        simulateFaceAnalysis();
      });
      
      function simulateFaceAnalysis() {
        // Simular detec√ß√£o de emo√ß√µes
        setTimeout(() => {
          document.getElementById('happiness-score').textContent = Math.floor(Math.random() * 30 + 20);
          document.getElementById('sadness-score').textContent = Math.floor(Math.random() * 30 + 10);
          document.getElementById('anger-score').textContent = Math.floor(Math.random() * 20 + 5);
          document.getElementById('surprise-score').textContent = Math.floor(Math.random() * 15 + 5);
          
          // Desenhar no canvas (simula√ß√£o)
          const ctx = scannerCanvas.getContext('2d');
          scannerCanvas.width = 400;
          scannerCanvas.height = 300;
          
          // Fundo
          ctx.fillStyle = '#1F2937';
          ctx.fillRect(0, 0, scannerCanvas.width, scannerCanvas.height);
          
          // Rosto simulado
          ctx.fillStyle = '#FBBF24';
          ctx.beginPath();
          ctx.arc(200, 150, 80, 0, Math.PI * 2);
          ctx.fill();
          
          // Olhos
          ctx.fillStyle = '#1F2937';
          ctx.beginPath();
          ctx.arc(170, 130, 15, 0, Math.PI * 2);
          ctx.arc(230, 130, 15, 0, Math.PI * 2);
          ctx.fill();
          
          // Boca (simulando emo√ß√£o)
          ctx.strokeStyle = '#1F2937';
          ctx.lineWidth = 3;
          ctx.beginPath();
          ctx.arc(200, 170, 30, 0.1 * Math.PI, 0.9 * Math.PI);
          ctx.stroke();
          
          // Pontos de refer√™ncia
          ctx.fillStyle = '#EF4444';
          for (let i = 0; i < 10; i++) {
            ctx.beginPath();
            ctx.arc(
              150 + Math.random() * 100,
              100 + Math.random() * 100,
              2,
              0,
              Math.PI * 2
            );
            ctx.fill();
          }
        }, 1500);
      }
      
      // An√°lise de voz
      const startVoiceAnalysisBtn = document.getElementById('start-voice-analysis');
      const voiceResults = document.getElementById('voice-results');
      const voiceVisualizer = document.getElementById('voice-visualizer');
      
      startVoiceAnalysisBtn.addEventListener('click', function() {
        startVoiceAnalysisBtn.textContent = 'Gravando...';
        startVoiceAnalysisBtn.classList.add('bg-red-600');
        
        // Simular an√°lise de voz
        setTimeout(() => {
          startVoiceAnalysisBtn.textContent = 'Gravar An√°lise';
          startVoiceAnalysisBtn.classList.remove('bg-red-600');
          voiceResults.classList.remove('hidden');
          voiceVisualizer.classList.remove('hidden');
          
          // Resultados simulados
          const tones = ['Neutro', 'Feliz', 'Triste', 'Ansioso'];
          const speeds = ['Lenta', 'Normal', 'R√°pida'];
          const stressLevels = ['Baixo', 'Moderado', 'Alto'];
          const emotions = ['Neutra', 'Felicidade', 'Tristeza', 'Raiva', 'Surpresa'];
          
          document.getElementById('tone-result').textContent = tones[Math.floor(Math.random() * tones.length)];
          document.getElementById('speed-result').textContent = speeds[Math.floor(Math.random() * speeds.length)];
          document.getElementById('stress-result').textContent = stressLevels[Math.floor(Math.random() * stressLevels.length)];
          document.getElementById('emotion-result').textContent = emotions[Math.floor(Math.random() * emotions.length)];
          
          // Visualizador de onda simulada
          const waveformCtx = document.getElementById('voice-waveform').getContext('2d');
          const width = voiceVisualizer.clientWidth;
          const height = voiceVisualizer.clientHeight;
          document.getElementById('voice-waveform').width = width;
          document.getElementById('voice-waveform').height = height;
          
          waveformCtx.clearRect(0, 0, width, height);
          waveformCtx.strokeStyle = '#22d3ee';
          waveformCtx.lineWidth = 2;
          waveformCtx.beginPath();
          
          for (let x = 0; x < width; x++) {
            const y = height / 2 + Math.sin(x * 0.1) * (Math.random() * height * 0.4);
            if (x === 0) {
              waveformCtx.moveTo(x, y);
            } else {
              waveformCtx.lineTo(x, y);
            }
          }
          
          waveformCtx.stroke();
        }, 3000);
      });
    }

    // ==================== FASE 3: Monitoramento Cont√≠nuo ====================
    function initMonitoringSystem() {
      // Conectar wearable
      const connectWearableBtn = document.getElementById('connect-wearable');
      const wearableStatus = document.getElementById('wearable-status');
      
      connectWearableBtn.addEventListener('click', function() {
        connectWearableBtn.disabled = true;
        connectWearableBtn.textContent = 'Conectando...';
        
        // Simular conex√£o com wearable
        setTimeout(() => {
          connectWearableBtn.textContent = 'Conectado';
          connectWearableBtn.classList.remove('gradient-bg');
          connectWearableBtn.classList.add('bg-green-600');
          wearableStatus.textContent = 'Dispositivo conectado - atualizando dados...';
          
          // Iniciar atualiza√ß√£o cont√≠nua de dados
          simulateWearableData();
        }, 2000);
      });
      
      function simulateWearableData() {
        // Atualizar dados biom√©tricos periodicamente
        setInterval(() => {
          document.getElementById('heart-rate').textContent = Math.floor(Math.random() * 30 + 70);
          document.getElementById('hrv').textContent = Math.floor(Math.random() * 30 + 50);
          
          const stressLevels = ['Baixo', 'Moderado', 'Alto'];
          document.getElementById('stress-level').textContent = stressLevels[Math.floor(Math.random() * stressLevels.length)];
          
          const sleepQualities = ['P√©ssima', 'Ruim', 'Regular', 'Boa', 'Excelente'];
          document.getElementById('sleep-quality').textContent = sleepQualities[Math.floor(Math.random() * sleepQualities.length)];
        }, 5000);
      }
      
      // An√°lise de di√°rio emocional
      const analyzeJournalBtn = document.getElementById('analyze-journal');
      const journalInsights = document.getElementById('journal-insights');
      
      analyzeJournalBtn.addEventListener('click', function() {
        const journalText = document.getElementById('emotional-journal').value;
        
        if (journalText.trim() === '') {
          journalInsights.textContent = 'Por favor, escreva algo no di√°rio antes de analisar.';
          journalInsights.classList.remove('hidden');
          return;
        }
        
        // Simular an√°lise de sentimento
        setTimeout(() => {
          let insight = '';
          
          if (journalText.toLowerCase().includes('bem') || journalText.toLowerCase().includes('feliz')) {
            insight = 'Seu texto sugere um estado emocional positivo. Continue cultivando esses sentimentos!';
          } else if (journalText.toLowerCase().includes('mal') || journalText.toLowerCase().includes('triste')) {
            insight = 'Seu texto indica sentimentos negativos. Lembre-se que todos temos dias dif√≠ceis e isso √© normal.';
          } else if (journalText.toLowerCase().includes('ansios') || journalText.toLowerCase().includes('nervos')) {
            insight = 'Voc√™ parece estar expressando ansiedade. T√©cnicas de respira√ß√£o podem ajudar a acalmar a mente.';
          } else {
            insight = 'Seu texto mostra um estado emocional neutro. Observe como voc√™ se sente ao longo do dia.';
          }
          
          // Adicionar insights de palavras-chave
          const keywords = [];
          if (journalText.toLowerCase().includes('trabalho')) keywords.push('trabalho');
          if (journalText.toLowerCase().includes('fam√≠lia')) keywords.push('fam√≠lia');
          if (journalText.toLowerCase().includes('amigos')) keywords.push('amigos');
          if (journalText.toLowerCase().includes('sa√∫de')) keywords.push('sa√∫de');
          
          if (keywords.length > 0) {
            insight += ` Voc√™ mencionou t√≥picos como: ${keywords.join(', ')}.`;
          }
          
          journalInsights.innerHTML = `<strong>Insights:</strong> ${insight}`;
          journalInsights.classList.remove('hidden');
        }, 1000);
      });
      
      // Registrar humor atual
      const addMoodBtn = document.getElementById('add-mood');
      addMoodBtn.addEventListener('click', function() {
        const moodModal = document.createElement('div');
        moodModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
        moodModal.innerHTML = `
          <div class="glass-card p-6 max-w-sm w-full">
            <h3 class="text-xl font-bold mb-4">Registrar Humor Atual</h3>
            <div class="grid grid-cols-5 gap-2 mb-4">
              ${['üòä', 'üòê', 'üò¢', 'üò†', 'üò®'].map(emoji => `
                <button class="text-3xl p-2 rounded-full hover:bg-gray-700 mood-emoji" data-mood="${emoji}">${emoji}</button>
              `).join('')}
            </div>
            <div class="flex justify-end space-x-3">
              <button id="cancel-mood" class="bg-gray-700 text-white py-2 px-4 rounded">Cancelar</button>
            </div>
          </div>
        `;
        
        document.body.appendChild(moodModal);
        
        // Event listeners para os emojis
        moodModal.querySelectorAll('.mood-emoji').forEach(btn => {
          btn.addEventListener('click', function() {
            const mood = this.getAttribute('data-mood');
            recordMood(mood);
            moodModal.remove();
          });
        });
        
        // Bot√£o cancelar
        moodModal.querySelector('#cancel-mood').addEventListener('click', function() {
          moodModal.remove();
        });
      });
      
      function recordMood(mood) {
        const feedback = document.createElement('div');
        feedback.className = 'fixed bottom-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg';
        feedback.textContent = `Humor registrado: ${mood}`;
        document.body.appendChild(feedback);
        
        setTimeout(() => {
          feedback.remove();
        }, 2000);
      }
      
      // Gr√°fico de tend√™ncias emocionais
      function renderTrendsChart() {
        const ctx = document.createElement('canvas');
        document.getElementById('trends-chart').appendChild(ctx);
        
        new Chart(ctx, {
          type: 'line',
          data: {
            labels: ['Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'S√°b', 'Dom'],
            datasets: [
              {
                label: 'Humor',
                data: [3, 4, 2, 5, 3, 6, 4],
                borderColor: '#22d3ee',
                backgroundColor: 'rgba(34, 211, 238, 0.1)',
                tension: 0.3
              },
              {
                label: 'Energia',
                data: [5, 4, 3, 6, 4, 7, 5],
                borderColor: '#7C3AED',
                backgroundColor: 'rgba(124, 58, 237, 0.1)',
                tension: 0.3
              },
              {
                label: 'Estresse',
                data: [4, 5, 6, 3, 5, 2, 4],
                borderColor: '#EF4444',
                backgroundColor: 'rgba(239, 68, 68, 0.1)',
                tension: 0.3
              }
            ]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              y: {
                beginAtZero: true,
                max: 10
              }
            },
            plugins: {
              legend: {
                position: 'bottom',
                labels: {
                  color: '#E5E7EB'
                }
              }
            },
            elements: {
              point: {
                radius: 4,
                hoverRadius: 6
              }
            }
          }
        });
      }
      
      // Inicializar gr√°fico
      renderTrendsChart();
      
      // Simular alertas
      setTimeout(() => {
        document.getElementById('stress-alert').classList.remove('hidden');
      }, 3000);
      
      setTimeout(() => {
        document.getElementById('sleep-alert').classList.remove('hidden');
      }, 6000);
    }

    // ==================== FASE 4: Sistema de Interven√ß√£o ====================
    function initInterventionSystem() {
      // Mostrar interven√ß√µes baseadas em "dados"
      setTimeout(() => {
        document.getElementById('breathing-exercise').classList.remove('hidden');
        document.getElementById('mindfulness-session').classList.remove('hidden');
        document.getElementById('activity-suggestion').classList.remove('hidden');
      }, 2000);
      
      // Event listeners para interven√ß√µes
      document.getElementById('breathing-exercise').querySelector('button').addEventListener('click', function() {
        showInterventionModal(
          'Exerc√≠cio de Respira√ß√£o 4-7-8',
          `
            <p class="mb-4">Esta t√©cnica ajuda a reduzir o estresse e promover relaxamento:</p>
            <ol class="list-decimal pl-5 space-y-2 mb-4">
              <li>Inspire profundamente pelo nariz contando at√© 4</li>
              <li>Segure a respira√ß√£o contando at√© 7</li>
              <li>Expire completamente pela boca contando at√© 8</li>
            </ol>
            <p>Repita este ciclo 4 vezes.</p>
          `
        );
      });
      
      document.getElementById('mindfulness-session').querySelector('button').addEventListener('click', function() {
        showInterventionModal(
          'Sess√£o R√°pida de Mindfulness',
          `
            <p class="mb-4">Vamos praticar uma breve sess√£o de aten√ß√£o plena:</p>
            <ol class="list-decimal pl-5 space-y-2 mb-4">
              <li>Sente-se confortavelmente e feche os olhos</li>
              <li>Observe sua respira√ß√£o sem tentar mud√°-la</li>
              <li>Quando sua mente divagar, gentilmente traga-a de volta √† respira√ß√£o</li>
              <li>Continue por 1-2 minutos</li>
            </ol>
            <p>Observe como se sente ap√≥s este exerc√≠cio.</p>
          `
        );
      });
      
      document.getElementById('activity-suggestion').querySelector('button').addEventListener('click', function() {
        showInterventionModal(
          'Sugest√£o de Atividade',
          `
            <p class="mb-4">Baseado no seu estado atual, sugerimos:</p>
            <div class="bg-gray-800 p-4 rounded-lg mb-4">
              <h4 class="font-semibold mb-2">Caminhada Curta</h4>
              <p class="text-sm">Uma caminhada de 10 minutos pode ajudar a melhorar seu humor e energia.</p>
            </div>
            <div class="bg-gray-800 p-4 rounded-lg">
              <h4 class="font-semibold mb-2">Lista de Gratid√£o</h4>
              <p class="text-sm">Anote 3 coisas pelas quais voc√™ √© grato hoje.</p>
            </div>
          `
        );
      });
      
      // Modal de interven√ß√£o
      function showInterventionModal(title, content) {
        const modal = document.getElementById('intervention-modal');
        document.getElementById('intervention-title').textContent = title;
        document.getElementById('intervention-content').innerHTML = content;
        modal.classList.remove('hidden');
        
        // Bot√µes do modal
        document.getElementById('cancel-intervention').addEventListener('click', function() {
          modal.classList.add('hidden');
        });
        
        document.getElementById('start-intervention').addEventListener('click', function() {
          modal.classList.add('hidden');
          addToInterventionHistory(title);
        });
      }
      
      // Adicionar ao hist√≥rico de interven√ß√µes
      function addToInterventionHistory(interventionName) {
        const historyContainer = document.getElementById('intervention-history');
        const now = new Date();
        const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        
        const entry = document.createElement('div');
        entry.className = 'p-2 bg-gray-800 rounded text-sm';
        entry.innerHTML = `
          <div class="flex justify-between">
            <span>${interventionName}</span>
            <span class="text-gray-400">${timeString}</span>
          </div>
        `;
        
        historyContainer.insertBefore(entry, historyContainer.firstChild);
        
        // Feedback
        const feedback = document.createElement('div');
        feedback.className = 'fixed bottom-4 right-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg';
        feedback.textContent = 'Interven√ß√£o iniciada!';
        document.body.appendChild(feedback);
        
        setTimeout(() => {
          feedback.remove();
        }, 2000);
      }
    }

    // ==================== FASE 5: Painel de Progresso ====================
    function initProgressDashboard() {
      // Mapa de progresso
      function renderProgressMap() {
        const canvas = document.createElement('canvas');
        document.getElementById('progress-map').appendChild(canvas);
        
        new Chart(canvas, {
          type: 'radar',
          data: {
            labels: ['Bem-estar', 'Estresse', 'Energia', 'Social', 'Sono', 'Mindfulness'],
            datasets: [
              {
                label: 'Semana Passada',
                data: [6, 5, 5, 4, 5, 3],
                backgroundColor: 'rgba(124, 58, 237, 0.2)',
                borderColor: '#7C3AED',
                borderWidth: 1
              },
              {
                label: 'Esta Semana',
                data: [7, 4, 6, 5, 6, 5],
                backgroundColor: 'rgba(34, 211, 238, 0.2)',
                borderColor: '#22d3ee',
                borderWidth: 1
              }
            ]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
              r: {
                angleLines: {
                  color: 'rgba(255, 255, 255, 0.1)'
                },
                grid: {
                  color: 'rgba(255, 255, 255, 0.1)'
                },
                suggestedMin: 0,
                suggestedMax: 10,
                pointLabels: {
                  color: '#E5E7EB'
                },
                ticks: {
                  backdropColor: 'rgba(0, 0, 0, 0)',
                  color: '#E5E7EB'
                }
              }
            },
            plugins: {
              legend: {
                labels: {
                  color: '#E5E7EB'
                }
              }
            }
          }
        });
      }
      
      // Gerar relat√≥rio semanal
      document.getElementById('generate-report').addEventListener('click', function() {
        const reportContainer = document.getElementById('weekly-report');
        reportContainer.innerHTML = `
          <div class="space-y-4">
            <div class="p-4 bg-gray-800 rounded-lg">
              <h4 class="font-semibold mb-2">Resumo Semanal</h4>
              <p>Esta semana voc√™ mostrou melhoras nos n√≠veis de energia e qualidade do sono. Seus registros de humor foram mais positivos em compara√ß√£o com a semana anterior.</p>
            </div>
            <div class="p-4 bg-gray-800 rounded-lg">
              <h4 class="font-semibold mb-2">√Årea de Destaque</h4>
              <p>Seu engajamento com exerc√≠cios de mindfulness aumentou em 40% esta semana. Continue assim!</p>
            </div>
            <div class="p-4 bg-gray-800 rounded-lg">
              <h4 class="font-semibold mb-2">√Årea para Melhoria</h4>
              <p>Seus n√≠veis de estresse ainda est√£o elevados nos dias de trabalho. Que tal experimentar t√©cnicas de gerenciamento de tempo?</p>
            </div>
            <div class="p-4 bg-gray-800 rounded-lg">
              <h4 class="font-semibold mb-2">Recomenda√ß√µes</h4>
              <ul class="list-disc pl-5 space-y-1">
                <li>Continue com os exerc√≠cios de respira√ß√£o pela manh√£</li>
                <li>Experimente fazer pausas curtas a cada hora de trabalho</li>
                <li>Mantenha seu di√°rio emocional - voc√™ j√° completou 5 dias!</li>
              </ul>
            </div>
          </div>
        `;
        reportContainer.classList.remove('hidden');
      });
      
      // Inicializar gr√°fico
      renderProgressMap();
    }

    // ==================== Fun√ß√µes Auxiliares ====================
    function generateAssessmentResults() {
      // Coletar respostas
      const stressLevel = document.getElementById('stress-level').value;
      const sleepQuality = document.getElementById('sleep-quality').value;
      const mood = document.getElementById('mood').value;
      const energy = document.getElementById('energy').value;
      const socialInteraction = document.getElementById('social-interaction').value;
      const physicalSymptoms = document.getElementById('physical-symptoms').value;
      const coping = document.getElementById('coping').value;
      const freeText = document.getElementById('free-text').value.toLowerCase();
      
      // Gerar diagn√≥stico
      let diagnosis = '';
      let recommendations = [];
      
      if (stressLevel === 'high' || stressLevel === 'extreme') {
        diagnosis += 'Seus n√≠veis de estresse est√£o significativamente elevados. ';
        recommendations.push('T√©cnicas de respira√ß√£o profunda', 'Intervalos regulares durante o trabalho', 'Limitar consumo de cafe√≠na');
      }
      
      if (sleepQuality === 'poor' || sleepQuality === 'fair') {
        diagnosis += 'Sua qualidade de sono pode estar afetando seu bem-estar. ';
        recommendations.push('Rotina regular de sono', 'Evitar telas antes de dormir', 'Ambiente escuro e fresco para dormir');
      }
      
      if (mood === 'sad' || mood === 'anxious' || mood === 'angry') {
        diagnosis += 'Seu humor predominante sugere desconforto emocional. ';
        
        if (mood === 'sad') {
          recommendations.push('Atividades prazerosas', 'Contato social positivo', 'Exerc√≠cios f√≠sicos leves');
        } else if (mood === 'anxious') {
          recommendations.push('T√©cnicas de aterramento', 'Mindfulness', 'Identificar gatilhos');
        } else if (mood === 'angry') {
          recommendations.push('Express√£o saud√°vel de sentimentos', 'T√©cnicas de pausa', 'Atividade f√≠sica para liberar tens√£o');
        }
      }
      
      if (energy === 'low' || energy === 'very-low') {
        diagnosis += 'Seus n√≠veis de energia est√£o abaixo do ideal. ';
        recommendations.push('Checar alimenta√ß√£o e hidrata√ß√£o', 'Atividades f√≠sicas moderadas', 'Pequenas metas alcan√ß√°veis');
      }
      
      if (socialInteraction === 'reduced' || socialInteraction === 'isolated') {
        diagnosis += 'Seu contato social parece reduzido. ';
        recommendations.push('Pequenas intera√ß√µes sociais', 'Atividades em grupo online', 'Manter contato com pessoas pr√≥ximas');
      }
      
      if (physicalSymptoms === 'moderate' || physicalSymptoms === 'severe') {
        diagnosis += 'Voc√™ est√° experimentando sintomas f√≠sicos significativos. ';
        recommendations.push('Avalia√ß√£o m√©dica se persistirem', 'T√©cnicas de relaxamento muscular', 'Alongamentos suaves');
      }
      
      if (coping === 'unhealthy') {
        diagnosis += 'Suas estrat√©gias de enfrentamento podem n√£o ser as mais saud√°veis. ';
        recommendations.push('Explorar t√©cnicas alternativas', 'Buscar apoio profissional', 'Identificar padr√µes');
      }
      
      if (diagnosis === '') {
        diagnosis = 'Seu perfil emocional parece equilibrado. Continue cuidando da sua sa√∫de mental!';
        recommendations = ['Manter h√°bitos saud√°veis', 'Praticar gratid√£o', 'Monitorar mudan√ßas'];
      }
      
      // An√°lise de texto livre
      let textAnalysis = '';
      if (freeText.includes('sobrecarreg') || freeText.includes('estress')) {
        textAnalysis = 'Seu relato confirma altos n√≠veis de estresse. √â importante encontrar formas de aliviar essa press√£o.';
      } else if (freeText.includes('trist') || freeText.includes('desanim')) {
        textAnalysis = 'Sua descri√ß√£o reflete sentimentos de tristeza. Lembre-se que √© normal se sentir assim √†s vezes.';
      } else if (freeText.includes('ansios') || freeText.includes('preocup')) {
        textAnalysis = 'Voc√™ parece estar descrevendo ansiedade. Tente focar no momento presente em vez de preocupa√ß√µes futuras.';
      } else if (freeText !== '') {
        textAnalysis = 'Obrigado por compartilhar seus sentimentos. Isso nos ajuda a entender melhor sua experi√™ncia.';
      }
      
      // Exibir resultados
      document.getElementById('assessment-results').classList.remove('hidden');
      
      // Gr√°fico de estado emocional
      const emotionalStateCtx = document.createElement('canvas');
      document.getElementById('emotional-state').appendChild(emotionalStateCtx);
      
      new Chart(emotionalStateCtx, {
        type: 'doughnut',
        data: {
          labels: ['Bem-estar', 'Estresse', 'Energia', 'Social'],
          datasets: [{
            data: [
              mood === 'happy' ? 70 : mood === 'neutral' ? 50 : 30,
              stressLevel === 'high' || stressLevel === 'extreme' ? 60 : stressLevel === 'moderate' ? 40 : 20,
              energy === 'high' ? 80 : energy === 'normal' ? 60 : energy === 'low' ? 40 : 20,
              socialInteraction === 'increased' ? 70 : socialInteraction === 'normal' ? 50 : socialInteraction === 'reduced' ? 30 : 10
            ],
            backgroundColor: [
              '#22d3ee',
              '#EF4444',
              '#7C3AED',
              '#F59E0B'
            ],
            borderWidth: 0
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: 'bottom',
              labels: {
                color: '#E5E7EB'
              }
            }
          },
          cutout: '70%'
        }
      });
      
      // Recomenda√ß√µes
      const recommendationsList = document.getElementById('recommendations');
      recommendations.forEach(rec => {
        const li = document.createElement('li');
        li.textContent = rec;
        recommendationsList.appendChild(li);
      });
      
      // Plano de a√ß√£o
      const actionPlan = document.getElementById('action-plan');
      actionPlan.innerHTML = `
        <p class="mb-2">${diagnosis}</p>
        ${textAnalysis ? `<p class="mb-2">${textAnalysis}</p>` : ''}
        <p class="text-sm text-gray-400 mt-4">Role para baixo para ver interven√ß√µes personalizadas.</p>
      `;
      
      // Rolagem suave para resultados
      document.getElementById('assessment-results').scrollIntoView({ behavior: 'smooth' });
      
      // Mostrar interven√ß√µes relevantes
      setTimeout(() => {
        document.getElementById('interventions-list').scrollIntoView({ behavior: 'smooth' });
      }, 1000);
    }

    // Inicializar Scanner Emocional
    initEmotionalScanner();
  </script>
</body>
</html>
