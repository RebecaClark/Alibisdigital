<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Diagn√≥stico M√©dico Inteligente com IA ü©∫</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background: #0b1120;
      color: #e5e7eb;
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 0;
      line-height: 1.6;
      overflow-x: hidden;
    }
    #particles-js {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      z-index: -1;
      background: linear-gradient(135deg, #0b1120, #1e1b4b, #2e1065);
    }
    .pulse { animation: pulse 2s infinite ease-in-out; }
    @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
    .fade-in { animation: fadeIn 1s ease-in-out; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    .slide-up { animation: slideUp 0.8s ease-out; }
    @keyframes slideUp { from { opacity: 0; transform: translateY(50px); } to { opacity: 1; transform: translateY(0); } }
    .glow { position: relative; }
    .glow::after { content: ''; position: absolute; top: -2px; left: -2px; right: -2px; bottom: -2px; background: radial-gradient(circle, rgba(34, 211, 238, 0.3) 0%, transparent 70%); border-radius: 50%; animation: glowPulse 3s infinite; }
    @keyframes glowPulse { 0% { transform: scale(0.95); opacity: 0.5; } 50% { transform: scale(1.05); opacity: 1; } 100% { transform: scale(0.95); opacity: 0.5; } }
    .holo-nav { background: rgba(17, 24, 39, 0.85); backdrop-filter: blur(10px); border-bottom: 1px solid rgba(255, 255, 255, 0.1); animation: holoGlow 2s infinite alternate; }
    @keyframes holoGlow { 0% { box-shadow: 0 0 8px #22d3ee; } 100% { box-shadow: 0 0 15px #22d3ee; } }
    .futuristic-btn {
      background: linear-gradient(45deg, #7C3AED, #22d3ee);
      color: #ffffff;
      padding: 0.75rem 1.5rem;
      border-radius: 9999px;
      font-size: 1rem;
      font-weight: 600;
      box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2), 0 0 8px #22d3ee;
      transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.5s ease;
      animation: neonPulse 1.5s infinite alternate;
    }
    @keyframes neonPulse { 0% { box-shadow: 0 0 5px #22d3ee; } 100% { box-shadow: 0 0 15px #22d3ee; } }
    .futuristic-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 0 20px #22d3ee; background: linear-gradient(45deg, #6D28D9, #06B6D4); }
    .form-container { background: rgba(20, 20, 20, 0.8); padding: 32px; border-radius: 15px; box-shadow: 0 0 15px rgba(0, 212, 255, 0.5); backdrop-filter: blur(5px); }
    .progress-circle { width: 100px; height: 100px; position: relative; }
    .progress-circle .pie { clip: rect(0, 100px, 100px, 50px); height: 100px; border-radius: 50%; position: absolute; background: #22d3ee; }
    .progress-circle .pie.left { transform: rotate(0deg); }
    .progress-circle .pie.right { transform: rotate(180deg); }
    .progress-circle .shadow { clip: rect(0, 50px, 100px, 0); height: 100px; border-radius: 50%; position: absolute; background: #1a1a1a; }
    .progress-circle .text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 1.2rem; font-weight: bold; }
    .symptom-item, .chronic-item { transition: all 0.3s ease; }
    .symptom-item:hover, .chronic-item:hover { background: rgba(34, 211, 238, 0.2); transform: translateY(-2px); }
    .symptom-item input:checked + span, .chronic-item input:checked + span { color: #22d3ee; font-weight: 600; }
  </style>
</head>
<body>
  <div id="particles-js"></div>
  <header class="holo-nav fixed top-0 left-0 w-full z-50 h-16">
    <div class="max-w-7xl mx-auto px-6 py-2 flex justify-between items-center">
      <div class="flex items-center space-x-3">
        <a href="/"><img src="/assets/logo.png" alt="√Ålibis Digital" class="h-10 fade-in" onerror="this.src='https://via.placeholder.com/150x40?text=Logo';"></a>
      </div>
      <div class="flex items-center space-x-3">
        <select id="language-toggle" class="bg-[rgba(55,65,81,0.8)] border-2 border-[#22d3ee] text-white rounded px-2 py-1">
          <option value="pt-BR">Portugu√™s</option>
          <option value="en">English</option>
          <option value="es">Espa√±ol</option>
        </select>
        <a href="/criar-conta.html" class="futuristic-btn text-white py-2 px-4 rounded-full text-sm font-semibold bounce-in">Criar Conta</a>
      </div>
    </div>
  </header>

  <section id="questionario" class="section pt-20 md:pt-24 min-h-screen flex items-center">
    <div class="container mx-auto px-4 text-center">
      <h1 class="text-4xl md:text-5xl font-bold text-white mb-6 pulse">Diagn√≥stico M√©dico Inteligente com IA ü©∫</h1>
      <p class="text-lg md:text-xl text-gray-300 mb-8 fade-in">Responda com precis√£o para um pr√©-diagn√≥stico avan√ßado, validado por especialistas.</p>
      <div class="progress-circle mx-auto mb-6">
        <div class="pie right"></div>
        <div class="pie left"></div>
        <div class="shadow"></div>
        <div class="text" id="progress-text">14%</div>
      </div>
      <p class="step-indicator text-xl text-[#22d3ee] mb-4 fade-in">Passo <span id="current-step">1</span> de 7</p>
      <div class="form-container">
        <form id="diagnostico-form">
          <!-- Step 1: Dados Demogr√°ficos -->
          <div id="step-1" class="step active slide-up">
            <div class="instructions text-gray-300 mb-4 p-4 bg-[rgba(45,55,72,0.9)] rounded-md">
              Forne√ßa suas informa√ß√µes b√°sicas para iniciar.
            </div>
            <div class="form-group">
              <label class="required" for="sexo">Sexo Biol√≥gico</label>
              <select id="sexo" class="w-full p-2 rounded bg-[rgba(55,65,81,0.8)] border-2 border-[#22d3ee] text-white glow" required>
                <option value="">Selecione...</option>
                <option value="Masculino">Masculino</option>
                <option value="Feminino">Feminino</option>
              </select>
              <div id="sexo-error" class="error-message">Selecione uma op√ß√£o.</div>
            </div>
            <div class="form-group">
              <label class="required" for="idade">Idade (anos)</label>
              <input id="idade" type="number" min="0" max="120" class="w-full p-2 rounded bg-[rgba(55,65,81,0.8)] border-2 border-[#22d3ee] text-white glow" placeholder="Ex.: 40" required />
              <div id="idade-error" class="error-message">Informe sua idade.</div>
            </div>
            <div class="form-group">
              <label class="required">Peso (kg) e Altura (m)</label>
              <div class="flex gap-4">
                <input id="peso" type="number" step="0.1" min="0" class="w-full p-2 rounded bg-[rgba(55,65,81,0.8)] border-2 border-[#22d3ee] text-white glow" placeholder="Ex.: 70" required />
                <input id="altura" type="number" step="0.01" min="0" class="w-full p-2 rounded bg-[rgba(55,65,81,0.8)] border-2 border-[#22d3ee] text-white glow" placeholder="Ex.: 1.80" required />
              </div>
              <div id="peso-error" class="error-message">Informe seu peso.</div>
              <div id="altura-error" class="error-message">Informe sua altura.</div>
            </div>
            <div class="form-group">
              <label for="wearable-data">Conectar Dispositivo Wearable (opcional)</label>
              <input id="wearable-data" type="text" class="w-full p-2 rounded bg-[rgba(55,65,81,0.8)] border-2 border-[#22d3ee] text-white" placeholder="Ex.: Fitbit HR: 80 bpm, SpO2: 96%" />
            </div>
          </div>

          <!-- Step 2: Sintomas Principais -->
          <div id="step-2" class="step slide-up">
            <div class="instructions text-gray-300 mb-4 p-4 bg-[rgba(45,55,72,0.9)] rounded-md">
              Selecione at√© 5 sintomas principais. Detalhes aparecem dinamicamente.
            </div>
            <div class="form-group">
              <label class="required text-lg">Sintomas Principais (Selecionados: <span id="symptom-count">0</span>/5)</label>
              <div class="grid grid-cols-2 gap-2 mt-2">
                <label class="symptom-item p-2 rounded cursor-pointer flex items-center space-x-2">
                  <input type="checkbox" name="sintomas" value="Febre/Hipertermia" class="form-checkbox h-5 w-5 text-[#22d3ee]">
                  <span>Febre/Hipertermia</span>
                </label>
                <label class="symptom-item p-2 rounded cursor-pointer flex items-center space-x-2">
                  <input type="checkbox" name="sintomas" value="Tosse" class="form-checkbox h-5 w-5 text-[#22d3ee]">
                  <span>Tosse</span>
                </label>
                <!-- Other symptoms remain the same -->
              </div>
              <div id="sintomas-error" class="error-message">Selecione pelo menos um sintoma.</div>
              <input id="sintomas-outra" type="text" class="w-full p-2 mt-2 rounded bg-[rgba(55,65,81,0.8)] border-2 border-[#22d3ee] text-white hidden" placeholder="Especifique" />
            </div>
            <div class="form-group hidden" id="febre-details">
              <label for="temperatura">Temperatura (¬∞C) & Rash?</label>
              <div class="flex gap-4">
                <input id="temperatura" type="number" step="0.1" min="35" max="42" class="w-1/2 p-2 rounded bg-[rgba(55,65,81,0.8)] border-2 border-[#22d3ee] text-white glow" placeholder="Ex.: 38.5" />
                <select id="febre-rash" class="w-1/2 p-2 rounded bg-[rgba(55,65,81,0.8)] border-2 border-[#22d3ee] text-white glow">
                  <option value="N√£o">N√£o</option>
                  <option value="Sim">Sim</option>
                </select>
              </div>
            </div>
            <!-- Other details sections remain -->
          </div>

          <!-- Remaining steps (3-6) remain similar, with glow class added to inputs -->

          <div class="flex justify-center mt-6">
            <button id="magic-wand" type="button" class="futuristic-btn mr-4">Varinha M√°gica</button>
            <button id="prev-step" type="button" class="futuristic-btn hidden">Anterior</button>
            <button id="next-step" type="button" class="futuristic-btn" disabled>Pr√≥ximo</button>
            <button id="submit-form" type="submit" class="futuristic-btn hidden" disabled>Enviar</button>
          </div>
        </form>

        <div id="resultado-diagnostico" class="result-container hidden mt-4 slide-up">
          <h2 class="text-2xl font-bold text-white mb-4">ü©∫ Pr√©-Diagn√≥stico Cl√≠nico</h2>
          <div id="resposta-diagnostico"></div>
          <p class="text-gray-400 mt-4">‚ö†Ô∏è Pr√©-diagn√≥stico por IA. Consulte um m√©dico.</p>
        </div>
      </div>
    </div>
  </section>

  <footer class="bg-[rgba(0,0,0,0.8)] text-gray-400 py-8">
    <div class="container mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-8">
      <div>
        <h3 class="text-white font-semibold mb-2">√Ålibis Digitais</h3>
        <p>Solu√ß√µes de bem-estar com IA avan√ßada.</p>
      </div>
      <div>
        <h4 class="text-white font-semibold mb-2">Navegue</h4>
        <ul class="space-y-1">
          <li><a href="index.html" class="hover:text-white transition">In√≠cio</a></li>
          <li><a href="scanner.html" class="hover:text-white transition">Scanner</a></li>
          <li><a href="blog.html" class="hover:text-white transition">Blog</a></li>
          <!-- Other links -->
        </ul>
      </div>
      <div>
        <h4 class="text-white font-semibold mb-2">Contato</h4>
        <ul class="space-y-1">
          <li><a href="mailto:contato@alibisdigitais.com.br" class="hover:text-white transition">E-mail</a></li>
          <li><a href="https://wa.me/5511912345678" class="hover:text-white transition">WhatsApp</a></li>
        </ul>
      </div>
    </div>
    <div class="text-center mt-4">
      <p class="text-sm">¬© 2025 √Ålibis Digitais. Todos os direitos reservados.</p>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <script>
    particlesJS('particles-js', {
      particles: { number: { value: 80, density: { enable: true, value_area: 800 } }, color: { value: '#22d3ee' }, shape: { type: 'circle' }, opacity: { value: 0.3 }, size: { value: 2 }, line_linked: { enable: true, distance: 100, color: '#22d3ee', opacity: 0.2 }, move: { enable: true, speed: 1 } },
      interactivity: { detect_on: 'canvas', events: { onhover: { enable: true, mode: 'repulse' }, onclick: { enable: true, mode: 'push' } } }
    });

    document.addEventListener('DOMContentLoaded', () => {
      let currentStep = 1;
      const totalSteps = 6; // Adjusted due to dynamic flow
      const steps = document.querySelectorAll('.step');
      const prevButton = document.getElementById('prev-step');
      const nextButton = document.getElementById('next-step');
      const submitButton = document.getElementById('submit-form');
      const magicWand = document.getElementById('magic-wand');
      const progressText = document.getElementById('progress-text');
      const currentStepText = document.getElementById('current-step');
      const symptomCount = document.getElementById('symptom-count');
      const languageToggle = document.getElementById('language-toggle');

      function updateProgress() {
        const percentage = ((currentStep - 1) / totalSteps) * 100;
        const rightPie = document.querySelector('.pie.right');
        const leftPie = document.querySelector('.pie.left');
        progressText.textContent = `${Math.round(percentage)}%`;
        if (percentage <= 50) {
          rightPie.style.transform = `rotate(${percentage * 3.6}deg)`;
          leftPie.style.transform = 'rotate(0deg)';
        } else {
          rightPie.style.transform = 'rotate(180deg)';
          leftPie.style.transform = `rotate(${ (percentage - 50) * 3.6 }deg)`;
        }
      }

      function updateStep() {
        steps.forEach((step, index) => step.classList.toggle('active', index === currentStep - 1));
        prevButton.classList.toggle('hidden', currentStep === 1);
        nextButton.classList.toggle('hidden', currentStep === totalSteps);
        submitButton.classList.toggle('hidden', currentStep !== totalSteps);
        currentStepText.textContent = currentStep;
        updateProgress();
        validateStep();
      }

      function validateStep() {
        let valid = true;
        const currentStepElement = steps[currentStep - 1];
        const inputs = currentStepElement.querySelectorAll('input[required], select[required]');
        inputs.forEach(input => {
          const errorElement = document.getElementById(`${input.id}-error`);
          if (!input.value || input.value === '') {
            valid = false;
            input.classList.add('border-red-500');
            if (errorElement) errorElement.style.display = 'block';
          } else {
            input.classList.remove('border-red-500');
            if (errorElement) errorElement.style.display = 'none';
          }
        });

        if (currentStep === 2) {
          const checkedSymptoms = currentStepElement.querySelectorAll('input[name="sintomas"]:checked');
          const symptomsError = document.getElementById('sintomas-error');
          symptomCount.textContent = checkedSymptoms.length;
          if (checkedSymptoms.length === 0) {
            valid = false;
            if (symptomsError) symptomsError.style.display = 'block';
          } else {
            if (symptomsError) symptomsError.style.display = 'none';
          }
          if (checkedSymptoms.length > 5) {
            checkedSymptoms[checkedSymptoms.length - 1].checked = false;
            alert('Selecione at√© 5 sintomas.');
            symptomCount.textContent = 5;
            valid = false;
          }
          document.getElementById('sintomas-outra').classList.toggle('hidden', !checkedSymptoms.some(c => c.value === 'Outro'));
          document.getElementById('febre-details').classList.toggle('hidden', !checkedSymptoms.some(c => c.value === 'Febre/Hipertermia'));
          // Other dynamic details
        }

        nextButton.disabled = !valid;
        submitButton.disabled = !valid;
        return valid;
      }

      prevButton.addEventListener('click', () => { if (currentStep > 1) { currentStep--; updateStep(); } });
      nextButton.addEventListener('click', () => { if (currentStep < totalSteps && validateStep()) { currentStep++; updateStep(); } });
      submitButton.addEventListener('click', (e) => { e.preventDefault(); if (validateStep()) processarDiagnostico(); });
      magicWand.addEventListener('click', () => { if (validateStep()) { currentStep++; updateStep(); } });
      document.querySelectorAll('input[name="sintomas"]').forEach(cb => cb.addEventListener('change', validateStep));

      languageToggle.addEventListener('change', (e) => {
        const lang = e.target.value;
        document.querySelectorAll('[data-lang]').forEach(el => {
          el.textContent = el.getAttribute(`data-${lang}`);
        });
      });

      function processarDiagnostico() {
        const dados = {
          sexo: document.getElementById('sexo').value || 'N√£o informado',
          idade: parseInt(document.getElementById('idade').value) || 0,
          peso: parseFloat(document.getElementById('peso').value) || 0,
          altura: parseFloat(document.getElementById('altura').value) || 0.1,
          imc: (parseFloat(document.getElementById('peso').value) / (parseFloat(document.getElementById('altura').value) ** 2)).toFixed(1) || 0,
          wearable: document.getElementById('wearable-data').value || 'Nenhum',
          sintomas: Array.from(document.querySelectorAll('input[name="sintomas"]:checked')).map(c => c.value === 'Outro' ? document.getElementById('sintomas-outra').value : c.value).join(', ') || 'Nenhum',
          temperatura: parseFloat(document.getElementById('temperatura').value) || 0,
          febre_rash: document.getElementById('febre-rash').value || 'N√£o',
          // Other data points
          duracao: document.getElementById('duracao').value || 'N√£o informado',
          // ... (rest of data collection)
        };

        let scores = { influenza: 0, covid19: 0, bronchitis: 0, dengue: 0, tension_headache: 0 };
        if (dados.sintomas.includes('Febre/Hipertermia')) {
          scores.influenza += 30; scores.covid19 += 25; scores.dengue += 25; scores.bronchitis += 15;
          if (dados.temperatura >= 38) { scores.influenza += 20; scores.covid19 += 10; scores.dengue += 15; }
          if (dados.febre_rash === 'Sim') scores.dengue += 20;
        }
        // ... (rest of scoring logic with wearable data adjustments)
        if (dados.wearable.includes('SpO2') && parseInt(dados.wearable.match(/\d+/)) < 92) scores.covid19 += 15;

        const possiveisDiagnosticos = [];
        if (scores.influenza >= 50) possiveisDiagnosticos.push({ nome: 'Influenza', probabilidade: Math.min(90, scores.influenza), recomendacao: 'Repouse e consulte um m√©dico.' });
        // ... (rest of diagnosis logic)

        let output = `<h3 class="text-lg font-bold mb-3">Resumo</h3><ul class="list-disc pl-6 mb-4"><li><strong>Sexo:</strong> ${dados.sexo}</li><li><strong>Idade:</strong> ${dados.idade}</li><li><strong>Wearable:</strong> ${dados.wearable}</li></ul><h3 class="text-lg font-bold mb-3">Diagn√≥sticos</h3><ul class="list-decimal pl-6">`;
        if (possiveisDiagnosticos.length === 0) output += '<li>Nenhum diagn√≥stico prov√°vel.</li>';
        else possiveisDiagnosticos.forEach(diag => output += `<li><strong>${diag.nome}</strong> (${diag.probabilidade}%)<br>${diag.recomendacao}</li>`);
        output += '</ul>';

        document.getElementById('resposta-diagnostico').innerHTML = output;
        document.getElementById('resultado-diagnostico').classList.remove('hidden');
      }

      updateStep();
    });
  </script>
</body>
</html>
