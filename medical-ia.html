<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diagn√≥stico M√©dico Avan√ßado com IA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dsp.js/1.0.0/dsp.min.js" onerror="console.warn('dsp.js failed to load, falling back to simulated heart rate')"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap">
    <style>
        html { scroll-behavior: smooth; }
        body {
            position: relative;
            overflow-x: hidden;
            font-family: 'Inter', sans-serif;
            background: transparent;
        }
        #particles-js {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            background: linear-gradient(135deg, #0b1120, #1e1b4b, #2e1065);
        }
        .fade-in { animation: fadeIn 1s ease-in-out; }
        .slide-in-left { animation: slideInLeft 1.2s ease-in-out; }
        .slide-in-right { animation: slideInRight 1.2s ease-in-out; }
        .pulse { animation: pulse 2s infinite ease-in-out; }
        .shine { position: relative; overflow: hidden; }
        .shine::after {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: linear-gradient(45deg, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.3), rgba(255, 255, 255, 0));
            transform: rotate(20deg); animation: shine 4s infinite linear;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes slideInLeft {
            from { opacity: 0; transform: translateX(-50px); }
            to { opacity: 1; transform: translateX(0); }
        }
        @keyframes slideInRight {
            from { opacity: 0; transform: translateX(50px); }
            to { opacity: 1; transform: translateX(0); }
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }
        @keyframes shine {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }
        .holo-nav {
            background: rgba(17, 24, 39, 0.85);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            animation: holoGlow 2s infinite alternate;
        }
        @keyframes holoGlow {
            0% { box-shadow: 0 0 8px #22d3ee; }
            100% { box-shadow: 0 0 15px #22d3ee; }
        }
        .holo-nav a, .holo-nav button {
            transition: color 0.3s ease;
        }
        .holo-nav a:hover, .holo-nav button:hover {
            color: #22d3ee;
            text-shadow: 0 0 5px #22d3ee;
        }
        .futuristic-btn {
            background: linear-gradient(45deg, #7C3AED, #22d3ee);
            box-shadow: 0 0 8px #22d3ee;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            animation: neonPulse 1.5s infinite alternate;
        }
        .futuristic-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 0 20px #22d3ee, 0 0 30px #22d3ee;
        }
        @keyframes neonPulse {
            from { box-shadow: 0 0 5px #22d3ee; }
            to { box-shadow: 0 0 15px #22d3ee; }
        }
        #chat-container {
            display: block;
            bottom: fixed 20px;
            right: fixed 20px;
            z-index: 1000;
        }
        #chat-bubble {
            background: linear-gradient(45deg, #7C3AED, #22d3ee);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 0 15px #22d3ee;
            animation: pulse 2s infinite;
        }
        #chat-window {
            display: none;
            background: rgba(17, 24, 39, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid #22d3ee;
            border-radius: 15px;
            width: 320px;
            height: 420px;
            position: absolute;
            bottom: 80px;
            right: 0;
            box-shadow: 0 0 15px #22d3ee;
        }
        #chat-messages {
            height: 340px;
            overflow-y: auto;
            padding: 12px;
            color: #e5e7eb;
        }
        #chat-input {
            background: rgba(55, 65, 81, 0.8);
            border: 1px solid #22d3ee;
            border-radius: 20px;
            padding: 10px;
            width: 100%;
            color: white;
        }
        .listening-indicator {
            display: none;
            color: #22d3ee;
            font-size: 0.9rem;
            text-align: center;
            margin-top: 5px;
        }
        .listening-indicator.active { display: block; }
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(40px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .animate-on-scroll.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .form-input, .form-textarea {
            background: rgba(55, 65, 81, 0.8);
            border: 1px solid #22d3ee;
            border-radius: 8px;
            padding: 12px;
            color: white;
            width: 100%;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        .form-input:focus, .form-textarea:focus {
            outline: none;
            border-color: #22d3ee;
            box-shadow: 0 0 8px #22d3ee;
        }
        .screen {
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        .screen.active {
            display: block;
            opacity: 1;
        }
        /* Estiliza√ß√£o para lista de sintomas (NOVO) */
        .symptom-list {
            display: flex;
            flex-direction: column;
            gap: 12px; /* Espa√ßamento vertical entre itens */
            max-height: 300px; /* Limite de altura com rolagem */
            overflow-y: auto; /* Rolagem para listas longas */
            padding: 8px;
            background: rgba(31, 41, 55, 0.5); /* Fundo sutil para destacar */
            border-radius: 8px;
        }
        .symptom-item {
            display: flex;
            align-items: center;
            padding: 8px;
            border-radius: 4px;
            transition: background 0.2s;
        }
        .symptom-item:hover {
            background: rgba(34, 211, 238, 0.1); /* Hover neon sutil */
        }
        .symptom-list input[type="checkbox"] {
            appearance: none;
            width: 18px;
            height: 18px;
            background-color: rgba(55, 65, 81, 0.8);
            border: 1px solid #22d3ee;
            border-radius: 4px;
            cursor: pointer;
            position: relative;
            transition: background-color 0.2s, border-color 0.2s;
        }
        .symptom-list input[type="checkbox"]:checked {
            background-color: #22d3ee;
            border-color: #22d3ee;
        }
        .symptom-list input[type="checkbox"]:checked::after {
            content: '\2713';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #0b1120;
            font-size: 14px;
            font-weight: bold;
        }
        .symptom-list label {
            color: #e5e7eb;
            cursor: pointer;
            margin-left: 8px;
            font-size: 0.875rem;
            transition: color 0.2s;
        }
        .symptom-list label:hover {
            color: #22d3ee;
        }
        /* Ajustes para responsividade */
        @media (min-width: 1440px) {
            .max-w-7xl { max-width: 1280px; }
            .max-w-3xl { max-width: 896px; }
            #diagnostico-form .form-group input,
            #diagnostico-form .form-group select,
            #diagnostico-form .form-group textarea {
                font-size: 1.125rem;
            }
            .symptom-list { max-height: 350px; }
            .symptom-list input[type="checkbox"] { width: 20px; height: 20px; }
            .symptom-list label { font-size: 1rem; }
            #chat-window { width: 360px; height: 460px; }
            #chat-messages { height: 380px; }
        }
        @media (max-width: 1024px) {
            .max-w-7xl { max-width: 100%; padding: 0 1.5rem; }
            .max-w-3xl { max-width: 100%; padding: 0 1rem; }
            #diagnostico-form .form-group input,
            #diagnostico-form .form-group select,
            #diagnostico-form .form-group textarea {
                font-size: 1rem;
            }
            .symptom-list { max-height: 300px; }
            .symptom-list input[type="checkbox"] { width: 18px; height: 18px; }
            .symptom-list label { font-size: 0.875rem; }
            .futuristic-btn { font-size: 1rem; padding: 0.75rem 1.5rem; }
        }
        @media (max-width: 768px) {
            .holo-nav .header-right { flex-direction: column; align-items: flex-end; }
            h1 { font-size: 2.25rem; line-height: 2.5rem; }
            h2 { font-size: 1.5rem; }
            .max-w-3xl { max-width: 100%; padding: 0 1rem; }
            .futuristic-btn { width: 100%; margin-bottom: 0.5rem; font-size: 0.875rem; padding: 0.75rem; }
            #chat-window { width: 95%; right: 2.5%; height: 400px; }
            #chat-messages { height: 320px; }
            #diagnostico-form .form-group { margin-bottom: 1.5rem; }
            #diagnostico-form .form-group label { font-size: 0.875rem; }
            .symptom-list { max-height: 250px; }
            .symptom-list input[type="checkbox"] { width: 16px; height: 16px; }
            .symptom-list label { font-size: 0.75rem; }
        }
        @media (max-width: 480px) {
            h1 { font-size: 1.75rem; line-height: 2rem; }
            h2 { font-size: 1.25rem; }
            .futuristic-btn { font-size: 0.75rem; padding: 0.5rem; }
            #chat-bubble { width: 50px; height: 50px; }
            #chat-window { width: 90%; height: 360px; }
            #chat-messages { height: 280px; }
            #diagnostico-form .form-group input,
            #diagnostico-form .form-group select,
            #diagnostico-form .form-group textarea {
                font-size: 0.875rem;
            }
            .form-input, .form-textarea { padding: 8px; }
            .symptom-list { max-height: 200px; }
            .symptom-list input[type="checkbox"] { width: 14px; height: 14px; }
            .symptom-list label { font-size: 0.75rem; }
        }
    </style>
</head>
<body class="text-white">
    <!-- Fundo com Part√≠culas -->
    <div id="particles-js"></div>

    <!-- Cabe√ßalho com Efeito Hologr√°fico -->
    <header class="holo-nav fixed top-0 left-0 w-full z-50 transition-shadow duration-300">
        <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <a href="/index.html" aria-label="P√°gina inicial da √Ålibis Digital">
                    <img src="/assets/logo.png" alt="Logo da √Ålibis Digital" class="h-10 w-auto">
                </a>
            </div>
            <div class="flex items-center space-x-3">
                <div class="md:hidden">
                    <button id="hamburger-menu" class="text-white focus:outline-none p-2 rounded" aria-label="Abrir menu de navega√ß√£o">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
            <nav id="navbar" class="hidden md:flex space-x-4 text-sm items-center">
                <a href="/blog.html" class="hover:text-[#22d3ee] transition">Blog</a>
                <a href="/alibi.html" class="hover:text-[#22d3ee] transition">Criar √Ålibi</a>
                <a href="/scanner.html" class="hover:text-[#22d3ee] transition">Scanner com IA</a>
                <a href="/apoio-emocional.html" class="hover:text-[#22d3ee] transition">Apoio Emocional</a>
                <a href="/suporte.html" class="hover:text-[#22d3ee] transition">Suporte</a>
                <a href="/login.html" class="futuristic-btn text-white py-2 px-4 rounded-full text-sm font-semibold" aria-label="Fazer login">Login</a>
                <a href="/criar-conta.html" class="futuristic-btn text-white py-2 px-4 rounded-full text-sm font-semibold bounce-in" aria-label="Criar conta">Criar Conta</a>
            </nav>
        </div>
        <div id="mobile-menu" class="md:hidden bg-[rgba(31,41,55,0.9)] w-full hidden py-4">
            <nav class="flex flex-col items-center space-y-4">
                <a href="/blog.html" class="text-white py-2 px-4 text-lg w-full text-center hover:bg-gray-700 rounded">Blog</a>
                <a href="/alibi.html" class="text-white py-2 px-4 text-lg w-full text-center hover:bg-gray-700 rounded">Criar √Ålibi</a>
                <a href="/scanner.html" class="text-white py-2 px-4 text-lg w-full text-center hover:bg-gray-700 rounded">Scanner com IA</a>
                <a href="/apoio-emocional.html" class="text-white py-2 px-4 text-lg w-full text-center hover:bg-gray-700 rounded">Apoio Emocional</a>
                <a href="/suporte.html" class="text-white py-2 px-4 text-lg w-full text-center hover:bg-gray-700 rounded">Suporte</a>
            </nav>
        </div>
    </header>
    <div class="h-20"></div>

    <section id="avaliacao-emocional" class="py-20 px-6">
        <div class="max-w-3xl mx-auto text-center">
            <h2 class="text-4xl font-bold mb-4 text-[#22d3ee] fade-in shine">Medical IA - Diagn√≥stico M√©dico Avan√ßado com IA</h2>
            <p class="text-white mb-4 text-center">Obtenha um pr√©-diagn√≥stico avan√ßado com tecnologia de ponta. Responda ao question√°rio abaixo.</p>
            <div class="neon-box mt-6 max-w-4xl mx-auto p-8 bg-gray-800 bg-opacity-80 backdrop-filter backdrop-blur-sm">
                <form id="diagnostico-form">
                    <!-- Step 1: Dados Demogr√°ficos -->
                    <div id="step-1" class="step active">
                        <div class="instructions text-gray-400 mb-4">
                            Forne√ßa suas informa√ß√µes b√°sicas para come√ßar. Esses dados ajudam a personalizar seu pr√©-diagn√≥stico.
                        </div>
                        <div class="form-group mb-4">
                            <label class="required text-white" for="sexo">Sexo Biol√≥gico</label>
                            <select id="sexo" required class="w-full p-2 bg-gray-800 border border-[#22d3ee] rounded">
                                <option value="">Selecione...</option>
                                <option value="Masculino">Masculino</option>
                                <option value="Feminino">Feminino</option>
                            </select>
                            <div id="sexo-error" class="error-message text-red-500 mt-1 hidden">Por favor, selecione uma op√ß√£o.</div>
                        </div>
                        <div class="form-group mb-4">
                            <label class="required text-white" for="idade">Idade (anos)</label>
                            <input id="idade" type="number" min="0" max="120" placeholder="Ex.: 40" required class="w-full p-2 bg-gray-800 border border-[#22d3ee] rounded">
                            <div id="idade-error" class="error-message text-red-500 mt-1 hidden">Por favor, informe sua idade.</div>
                        </div>
                        <div class="form-group mb-4">
                            <label class="required text-white">Peso (kg) e Altura (m)</label>
                            <div class="flex gap-4">
                                <div class="flex-1">
                                    <input id="peso" type="number" step="0.1" min="0" placeholder="Ex.: 70" required class="w-full p-2 bg-gray-800 border border-[#22d3ee] rounded">
                                    <div id="peso-error" class="error-message text-red-500 mt-1 hidden">Por favor, informe seu peso.</div>
                                </div>
                                <div class="flex-1">
                                    <input id="altura" type="number" step="0.01" min="0" placeholder="Ex.: 1.80" required class="w-full p-2 bg-gray-800 border border-[#22d3ee] rounded">
                                    <div id="altura-error" class="error-message text-red-500 mt-1 hidden">Por favor, informe sua altura.</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2: Sintomas Principais (NOVO LAYOUT) -->
                    <div id="step-2" class="step">
                        <div class="instructions text-gray-400 mb-4">
                            Selecione at√© 5 sintomas principais que voc√™ est√° enfrentando. Forne√ßa detalhes adicionais quando solicitado.
                        </div>
                        <div class="form-group mb-4">
                            <label class="required text-white mb-2 block">Sintomas Principais (Selecione at√© 5)</label>
                            <div class="symptom-list">
                                <div class="symptom-item">
                                    <input type="checkbox" name="sintomas" value="Febre/Hipertermia" id="sintoma-fiebre">
                                    <label for="sintoma-fiebre">Febre/Hipertermia</label>
                                </div>
                                <div class="symptom-item">
                                    <input type="checkbox" name="sintomas" value="Tosse" id="sintoma-tosse">
                                    <label for="sintoma-tosse">Tosse</label>
                                </div>
                                <div class="symptom-item">
                                    <input type="checkbox" name="sintomas" value="Dispneia" id="sintoma-dispneia">
                                    <label for="sintoma-dispneia">Dispneia (Falta de Ar)</label>
                                </div>
                                <div class="symptom-item">
                                    <input type="checkbox" name="sintomas" value="Dor de Cabe√ßa" id="sintoma-dor-cabeca">
                                    <label for="sintoma-dor-cabeca">Dor de Cabe√ßa</label>
                                </div>
                                <div class="symptom-item">
                                    <input type="checkbox" name="sintomas" value="Dor Muscular" id="sintoma-dor-muscular">
                                    <label for="sintoma-dor-muscular">Dor Muscular/Articular</label>
                                </div>
                                <div class="symptom-item">
                                    <input type="checkbox" name="sintomas" value="Fadiga" id="sintoma-fadiga">
                                    <label for="sintoma-fadiga">Fadiga (Cansa√ßo Extremo)</label>
                                </div>
                                <div class="symptom-item">
                                    <input type="checkbox" name="sintomas" value="N√°usea/V√¥mito" id="sintoma-nausea">
                                    <label for="sintoma-nausea">N√°usea/V√¥mito</label>
                                </div>
                                <div class="symptom-item">
                                    <input type="checkbox" name="sintomas" value="Dor Abdominal" id="sintoma-dor-abdominal">
                                    <label for="sintoma-dor-abdominal">Dor Abdominal</label>
                                </div>
                                <div class="symptom-item">
                                    <input type="checkbox" name="sintomas" value="Manchas Cut√¢neas" id="sintoma-manchas">
                                    <label for="sintoma-manchas">Manchas Cut√¢neas</label>
                                </div>
                                <div class="symptom-item">
                                    <input type="checkbox" name="sintomas" value="Icter√≠cia" id="sintoma-ictericia">
                                    <label for="sintoma-ictericia">Icter√≠cia</label>
                                </div>
                                <div class="symptom-item">
                                    <input type="checkbox" name="sintomas" value="Outro" id="sintoma-outro">
                                    <label for="sintoma-outro">Outro</label>
                                </div>
                            </div>
                            <div id="sintomas-error" class="error-message text-red-500 mt-1 hidden">Por favor, selecione pelo menos um sintoma.</div>
                            <input id="sintomas-outra" type="text" class="w-full p-2 bg-gray-800 border border-[#22d3ee] rounded mt-2 hidden" placeholder="Especifique o sintoma">
                        </div>
                        <div class="form-group mb-4 hidden" id="febre-details">
                            <label class="text-white" for="temperatura">Temperatura M√°xima (¬∞C)</label>
                            <input id="temperatura" type="number" step="0.1" min="35" max="42" placeholder="Ex.: 38.5" class="w-full p-2 bg-gray-800 border border-[#22d3ee] rounded">
                        </div>
                        <div class="form-group mb-4 hidden" id="dor-details">
                            <label class="text-white" for="dor-intensidade">Intensidade da Dor (0-10)</label>
                            <input id="dor-intensidade" type="number" min="0" max="10" placeholder="Ex.: 7" class="w-full p-2 bg-gray-800 border border-[#22d3ee] rounded">
                        </div>
                        <div class="form-group mb-4 hidden" id="tosse-details">
                            <label class="text-white" for="tosse-tipo">Tipo de Tosse</label>
                            <select id="tosse-tipo" class="w-full p-2 bg-gray-800 border border-[#22d3ee] rounded">
                                <option value="">Selecione...</option>
                                <option value="Seca">Seca</option>
                                <option value="Produtiva">Produtiva (com secre√ß√£o)</option>
                            </select>
                        </div>
                        <div class="form-group mb-4 hidden" id="dispneia-details">
                            <label class="text-white" for="dispneia-gravidade">Gravidade da Dispneia (0-4)</label>
                            <select id="dispneia-gravidade" class="w-full p-2 bg-gray-800 border border-[#22d3ee] rounded">
                                <option value="0">0: Sem falta de ar</option>
                                <option value="1">1: Leve, s√≥ em esfor√ßos intensos</option>
                                <option value="2">2: Moderada, ao caminhar r√°pido</option>
                                <option value="3">3: Grave, ao caminhar devagar</option>
                                <option value="4">4: Muito grave, em repouso</option>
                            </select>
                        </div>
                    </div>

                    <!-- Step 3: Contexto dos Sintomas -->
                    <div id="step-3" class="step">
                        <div class="instructions text-gray-400 mb-4">
                            Descreva o contexto dos seus sintomas, incluindo dura√ß√£o e fatores relacionados.
                        </div>
                        <div class="form-group mb-4">
                            <label class="required text-white" for="duracao">Dura√ß√£o dos Sintomas</label>
                            <select id="duracao" required class="w-full p-2 bg-gray-800 border border-[#22d3ee] rounded">
                                <option value="">Selecione...</option>
                                <option value="Horas">Horas</option>
                                <option value="1-3 Dias">1-3 Dias</option>
                                <option value="4-7 Dias">4-7 Dias</option>
                                <option value="8-14 Dias">8-14 Dias</option>
                                <option value="Mais de 14 Dias">Mais de 14 Dias</option>
                                <option value="Cr√¥nica">Cr√¥nica (>3 meses)</option>
                            </select>
                            <div id="duracao-error" class="error-message text-red-500 mt-1 hidden">Por favor, selecione a dura√ß√£o.</div>
                        </div>
                        <div class="form-group mb-4">
                            <label class="text-white" for="desencadeantes">Fatores Desencadeantes ou Agravantes</label>
                            <input id="desencadeantes" type="text" placeholder="Ex.: frio, esfor√ßo f√≠sico" class="w-full p-2 bg-gray-800 border border-[#22d3ee] rounded">
                        </div>
                        <div class="form-group mb-4">
                            <label class="text-white" for="aliviantes">Fatores Aliviantes</label>
                            <input id="aliviantes" type="text" placeholder="Ex.: repouso" class="w-full p-2 bg-gray-800 border border-[#22d3ee] rounded">
                        </div>
                        <div class="form-group mb-4">
                            <label class="required text-white" for="exposicao">Contexto de Exposi√ß√£o</label>
                            <select id="exposicao" required class="w-full p-2 bg-gray-800 border border-[#22d3ee] rounded">
                                <option value="Nenhuma">Nenhuma</option>
                                <option value="Viagem Internacional">Viagem Internacional</option>
                                <option value="Contato com Doentes">Contato com Doentes</option>
                                <option value="√Ågua Contaminada">√Ågua Contaminada (ex.: enchentes)</option>
                                <option value="Animais ou Insetos">Animais ou Insetos (ex.: mosquitos)</option>
                                <option value="√Årea com Surtos">√Årea com Surtos (ex.: Dengue)</option>
                            </select>
                            <div id="exposicao-error" class="error-message text-red-500 mt-1 hidden">Por favor, selecione uma op√ß√£o.</div>
                        </div>
                    </div>

                    <!-- Step 4: Doen√ßas Cr√¥nicas -->
                    <div id="step-4" class="step">
                        <div class="instructions text-gray-400 mb-4">
                            Informe suas condi√ß√µes m√©dicas preexistentes e hist√≥rico de sa√∫de.
                        </div>
                        <div class="form-group mb-4">
                            <label class="text-white">Doen√ßas Cr√¥nicas</label>
                            <div class="checkbox-grid grid grid-cols-2 gap-2">
                                <label class="flex items-center"><input type="checkbox" name="cronicas" value="Nenhuma" checked class="mr-2"> Nenhuma</label>
                                <label class="flex items-center"><input type="checkbox" name="cronicas" value="Diabetes" class="mr-2"> Diabetes</label>
                                <label class="flex items-center"><input type="checkbox" name="cronicas" value="Hipertens√£o" class="mr-2"> Hipertens√£o</label>
                                <label class="flex items-center"><input type="checkbox" name="cronicas" value="Asma" class="mr-2"> Asma</label>
                                <label class="flex items-center"><input type="checkbox" name="cronicas" value="Doen√ßa do Cora√ß√£o" class="mr-2"> Doen√ßa do Cora√ß√£o</label>
                                <label class="flex items-center"><input type="checkbox" name="cronicas" value="Depress√£o" class="mr-2"> Depress√£o</label>
                                <label class="flex items-center"><input type="checkbox" name="cronicas" value="Enxaqueca" class="mr-2"> Enxaqueca</label>
                                <label class="flex items-center"><input type="checkbox" name="cronicas" value="Outra" class="mr-2"> Outra</label>
                            </div>
                            <input id="cronicas-outra" type="text" class="w-full p-2 bg-gray-800 border border-[#22d3ee] rounded mt-2 hidden" placeholder="Ex.: Especificar (ex.: artrite)">
                        </div>
                        <div class="form-group mb-4">
                            <label class="text-white" for="cirurgias">Cirurgias Pr√©vias</label>
                            <input id="cirurgias" type="text" placeholder="Ex.: apendicectomia em 2010" class="w-full p-2 bg-gray-800 border border-[#22d3ee] rounded">
                        </div>
                        <div class="form-group mb-4">
                            <label class="text-white" for="alergias">Alergias Medicamentosas ou Ambientais</label>
                            <input id="alergias" type="text" placeholder="Ex.: penicilina, p√≥len" class="w-full p-2 bg-gray-800 border border-[#22d3ee] rounded">
                        </div>
                        <div class="form-group mb-4">
                            <label class="text-white" for="medicamentos">Medicamentos em Uso</label>
                            <input id="medicamentos" type="text" placeholder="Ex.: Losartana 50 mg, 1x/dia" class="w-full p-2 bg-gray-800 border border-[#22d3ee] rounded">
                        </div>
                    </div>

                    <!-- Step 5: Estilo de Vida -->
                    <div id="step-5" class="step">
                        <div class="instructions text-gray-400 mb-4">
                            Detalhe seu estilo de vida para ajudar na avalia√ß√£o do seu estado de sa√∫de.
                        </div>
                        <div class="form-group mb-4">
                            <label class="required text-white" for="tabagismo">Tabagismo</label>
                            <select id="tabagismo" required class="w-full p-2 bg-gray-800 border border-[#22d3ee] rounded">
                                <option value="Nunca Fumou">Nunca Fumou</option>
                                <option value="Ex-Fumante">Ex-Fumante</option>
                                <option value="Fumante Ativo">Fumante Ativo</option>
                            </select>
                            <div id="tabagismo-error" class="error-message text-red-500 mt-1 hidden">Por favor, selecione uma op√ß√£o.</div>
                            <input id="tabagismo-detalhes" type="text" class="w-full p-2 bg-gray-800 border border-[#22d3ee] rounded mt-2 hidden" placeholder="Ex.: 20 ma√ßos-ano">
                        </div>
                        <div class="form-group mb-4">
                            <label class="required text-white" for="etilismo">Etilismo</label>
                            <select id="etilismo" required class="w-full p-2 bg-gray-800 border border-[#22d3ee] rounded">
                                <option value="N√£o Bebe">N√£o Bebe</option>
                                <option value="Uso Social">Uso Social</option>
                                <option value="Uso Regular">Uso Regular</option>
                            </select>
                            <div id="etilismo-error" class="error-message text-red-500 mt-1 hidden">Por favor, selecione uma op√ß√£o.</div>
                            <input id="etilismo-detalhes" type="text" class="w-full p-2 bg-gray-800 border border-[#22d3ee] rounded mt-2 hidden" placeholder="Ex.: 2 doses/semana">
                        </div>
                        <div class="form-group mb-4">
                            <label class="required text-white" for="atividade-fisica">Atividade F√≠sica</label>
                            <select id="atividade-fisica" required class="w-full p-2 bg-gray-800 border border-[#22d3ee] rounded">
                                <option value="Sedent√°rio">Sedent√°rio</option>
                                <option value="Leve">Leve (ex.: caminhada 2x/semana)</option>
                                <option value="Moderada">Moderada (ex.: academia 3-4x/semana)</option>
                                <option value="Intensa">Intensa (ex.: treino di√°rio)</option>
                            </select>
                            <div id="atividade-fisica-error" class="error-message text-red-500 mt-1 hidden">Por favor, selecione uma op√ß√£o.</div>
                        </div>
                        <div class="form-group mb-4">
                            <label class="text-white" for="estresse">N√≠vel de Estresse (0-5)</label>
                            <input id="estresse" type="number" min="0" max="5" placeholder="0 = Nenhum, 5 = Extremo" class="w-full p-2 bg-gray-800 border border-[#22d3ee] rounded">
                        </div>
                    </div>

                    <!-- Step 6: Revis√£o de Sistemas (NOVO LAYOUT) -->
                    <div id="step-6" class="step">
                        <div class="instructions text-gray-400 mb-4">
                            Informe sintomas adicionais ou observa√ß√µes para completar sua avalia√ß√£o.
                        </div>
                        <div class="form-group mb-4">
                            <label class="text-white" for="sinais-vitais">Sinais Vitais Recentes (opcional)</label>
                            <input id="sinais-vitais" type="text" placeholder="Ex.: PA 130/80 mmHg, FC 72 bpm" class="w-full p-2 bg-gray-800 border border-[#22d3ee] rounded">
                        </div>
                        <div class="form-group mb-4">
                            <label class="text-white mb-2 block">Sintomas Secund√°rios</label>
                            <div class="symptom-list">
                                <div class="symptom-item">
                                    <input type="checkbox" name="sintomas-secundarios" value="Perda de Paladar/Olfato" id="sintoma-sec-perda-padar">
                                    <label for="sintoma-sec-perda-padar">Perda de Paladar/Olfato</label>
                                </div>
                                <div class="symptom-item">
                                    <input type="checkbox" name="sintomas-secundarios" value="Dor de Garganta" id="sintoma-sec-dor-garganta">
                                    <label for="sintoma-sec-dor-garganta">Dor de Garganta</label>
                                </div>
                                <div class="symptom-item">
                                    <input type="checkbox" name="sintomas-secundarios" value="Coriza" id="sintoma-sec-coriza">
                                    <label for="sintoma-sec-coriza">Coriza</label>
                                </div>
                                <div class="symptom-item">
                                    <input type="checkbox" name="sintomas-secundarios" value="Diarreia" id="sintoma-sec-diarreia">
                                    <label for="sintoma-sec-diarreia">Diarreia</label>
                                </div>
                                <div class="symptom-item">
                                    <input type="checkbox" name="sintomas-secundarios" value="Tontura" id="sintoma-sec-tontura">
                                    <label for="sintoma-sec-tontura">Tontura</label>
                                </div>
                                <div class="symptom-item">
                                    <input type="checkbox" name="sintomas-secundarios" value="Perda de Peso" id="sintoma-sec-perda-peso">
                                    <label for="sintoma-sec-perda-peso">Perda de Peso Involunt√°ria</label>
                                </div>
                                <div class="symptom-item">
                                    <input type="checkbox" name="sintomas-secundarios" value="Suores Noturnos" id="sintoma-sec-suores">
                                    <label for="sintoma-sec-suores">Suores Noturnos</label>
                                </div>
                                <div class="symptom-item">
                                    <input type="checkbox" name="sintomas-secundarios" value="Confus√£o Mental" id="sintoma-sec-confusao">
                                    <label for="sintoma-sec-confusao">Confus√£o Mental</label>
                                </div>
                                <div class="symptom-item">
                                    <input type="checkbox" name="sintomas-secundarios" value="Tremor" id="sintoma-sec-tremor">
                                    <label for="sintoma-sec-tremor">Tremor</label>
                                </div>
                                <div class="symptom-item">
                                    <input type="checkbox" name="sintomas-secundarios" value="Tristeza Persistente" id="sintoma-sec-tristeza">
                                    <label for="sintoma-sec-tristeza">Tristeza Persistente</label>
                                </div>
                                <div class="symptom-item">
                                    <input type="checkbox" name="sintomas-secundarios" value="Manchas Anest√©sicas" id="sintoma-sec-manchas-anest">
                                    <label for="sintoma-sec-manchas-anest">Manchas Anest√©sicas</label>
                                </div>
                                <div class="symptom-item">
                                    <input type="checkbox" name="sintomas-secundarios" value="Sede Excessiva" id="sintoma-sec-sede">
                                    <label for="sintoma-sec-sede">Sede Excessiva</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group mb-4">
                            <label class="text-white" for="observacoes">Observa√ß√µes Adicionais</label>
                            <textarea id="observacoes" rows="5" placeholder="Descreva outros sintomas ou informa√ß√µes relevantes" class="w-full p-2 bg-gray-800 border border-[#22d3ee] rounded"></textarea>
                        </div>
                    </div>

                    <div class="flex justify-end mt-6">
                        <button id="submit-form" type="submit" class="futuristic-btn" disabled>Obter Diagn√≥stico</button>
                    </div>
                </form>

                <div id="resultado-diagnostico" class="hidden mt-6">
                    <h2 class="text-2xl font-bold text-[#22d3ee] mb-4">ü©∫ Pr√©-Diagn√≥stico Cl√≠nico</h2>
                    <div id="resposta-diagnostico"></div>
                    <p class="text-gray-400 mt-4">‚ö†Ô∏è Este √© um pr√©-diagn√≥stico gerado por IA. N√£o substitui uma consulta m√©dica profissional. Consulte um m√©dico para um diagn√≥stico preciso.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Rodap√© -->
    <footer class="bg-[rgba(15,23,42,0.8)] py-10 px-4 text-white">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="space-y-4">
                    <h3 class="text-xl font-bold text-white shine">√Ålibis Digital</h3>
                    <p class="text-sm text-gray-400 fade-in">Solu√ß√µes de bem-estar com tecnologia avan√ßada.</p>
                </div>
                <div class="space-y-4">
                    <h4 class="text-lg font-semibold text-white">Navega√ß√£o</h4>
                    <ul class="space-y-2 text-sm">
                        <li><a href="/#" class="text-gray-400 hover:text-white transition">In√≠cio</a></li>
                        <li><a href="/scanner.html" class="text-gray-400 hover:text-white transition">Scanner</a></li>
                        <li><a href="/blog.html" class="text-gray-400 hover:text-white transition">Blog</a></li>
                        <li><a href="/medical-ia.html" class="text-gray-400 hover:text-white transition">Diagn√≥sticos</a></li>
                        <li><a href="/apoio-emocional.html" class="text-gray-400 hover:text-white transition">Apoio Emocional</a></li>
                        <li><a href="/alibi.html" class="text-gray-400 hover:text-white transition">Criar √Ålibis</a></li>
                        <li><a href="/planos.html" class="text-gray-400 hover:text-white transition">Planos</a></li>
                        <li><a href="/suporte.html" class="text-gray-400 hover:text-white transition">Suporte</a></li>
                        <li><a href="/sobre.html" class="text-gray-500 hover:text-white transition">Adicionar</a></li>
                        <li><a href="/login.html" class="text-gray-400 hover:text-white transition">Login</a></li>
                    </ul>
                </div>
                <div class="space-y-4">
                    <h4 class="text-lg font-semibold text-white">Contato</h4>
                    <ul class="space-y-2 text-sm">
                        <li class="fade-in">E-mail: <a href="mailto:support@alibisdigital.com.br" class="text-gray-400 hover:text-white transition">support@alibisdigital.com.br</a></li>
                        <li class="fade-in">WhatsApp: <a href="https://wa.me/5511912345678" class="text-gray-400 hover:text-white transition">+55 11 91234-5678</a></li>
                        <li><a href="/privacidade.html" class="text-gray-400 hover:text-white transition">Pol√≠tica de Privacidade</a></li>
                        <li><a href="/termos.html" class="text-gray-400 hover:text-white transition">Termos de Uso</a></li>
                        <li><a href="/politicas.html" class="text-gray-400 hover:text-white transition">Pol√≠ticas Gerais</a></li>
                    </ul>
                </div>
            </div>
            <div class="mt-8 text-center">
                <p class="text-xs text-gray-500">¬© 2025 √Ålibis Digital. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            console.log('[INIT] DOM loaded, inicializing Form');

            let currentStep = 1;
            const totalSteps = 6;
            const steps = document.querySelectorAll('.step');
            const submitButton = document.getElementById('submit-form');

            // Inicializar part√≠culas
            particlesJS('particles-js', {
                particles: {
                    number: { value: 80, density: { enable: true, value_area: 800 } },
                    color: { value: '#22d3ee' },
                    shape: { type: 'circle' },
                    opacity: { value: 0.5, random: true },
                    size: { value: 3, random: true },
                    move: { enable: true, speed: 2, direction: 'none', random: true }
                },
                interactivity: {
                    events: { onhover: { enable: true, mode: 'repulse' } }
                }
            });

            function updateStep() {
                console.log(`[NAV] Atualizando para passo ${currentStep}`);
                try {
                    steps.forEach((step, index) => {
                        const isActive = index === currentStep - 1;
                        step.classList.toggle('active', isActive);
                        console.log(`[NAV] Passo ${index + 1} ativo: ${isActive}`);
                    });
                    validateStep();
                } catch (e) {
                    console.error(`[ERROR] updateStep falhou: ${e.message}`);
                }
            }

            function validateStep() {
                console.log(`[VALIDATE] Validando passo ${currentStep}`);
                let valid = true;
                const currentStepElement = steps[currentStep - 1];
                if (!currentStepElement) {
                    console.error(`[ERROR] Passo ${currentStep} n√£o encontrado`);
                    return false;
                }

                // Validar inputs obrigat√≥rios
                const inputs = currentStepElement.querySelectorAll('input[required], select[required]');
                inputs.forEach(input => {
                    const errorElement = document.getElementById(`${input.id}-error`);
                    const isValid = input.value && input.value !== '';
                    if (!isValid) {
                        valid = false;
                        input.classList.add('border-red-500');
                        if (errorElement) errorElement.classList.remove('hidden');
                        console.log(`[VALIDATE] Input ${input.id} inv√°lido: ${input.value}`);
                    } else {
                        input.classList.remove('border-red-500');
                        if (errorElement) errorElement.classList.add('hidden');
                        console.log(`[VALIDATE] Input ${input.id} v√°lido: ${input.value}`);
                    }
                });

                // Valida√ß√£o espec√≠fica para passo 2
                if (currentStep === 2) {
                    const checkedSymptoms = currentStepElement.querySelectorAll('input[name="sintomas"]:checked').length;
                    const symptomsError = document.getElementById('sintomas-error');
                    if (checkedSymptoms.length === 0) {
                        valid = false;
                        if (symptomsError) symptomsError.classList.remove('hidden');
                        console.log('[VALIDATE] Nenhum sintoma selecionado');
                    } else {
                        if (symptomsError) symptomsError.classList.add('hidden');
                        console.log(`[VALIDATE] ${checkedSymptoms.length} sintomas selecionados`);
                    }
                }

                submitButton.disabled = !valid;
                console.log(`[VALIDATE] Passo ${currentStep} v√°lido: ${valid}, Bot√£o de envio desabilitado: ${submitButton.disabled}`);
                return valid;
            }

            // Listeners para valida√ß√£o em tempo real
            steps.forEach(step => {
                step.querySelectorAll('input, select').forEach(input => {
                    input.addEventListener('input', () => {
                        console.log(`[INPUT] ${input.id} alterado para: ${input.value}`);
                        validateStep();
                    });
                    input.addEventListener('change', () => {
                        console.log(`[CHANGE] ${input.id} alterado para: ${input.value}`);
                        validateStep();
                    });
                });
                if (step.id === 'step-2') {
                    step.querySelectorAll('input[name="sintomas"]').forEach(cb => {
                        cb.addEventListener('change', validateStep);
                    });
                }
            });

            submitButton.addEventListener('click', (e) => {
                e.preventDefault();
                console.log('[SUBMIT] Bot√£o de envio clicado');
                if (validateStep()) {
                    processarDiagnostico();
                } else {
                    console.log('[ERROR] Formul√°rio inv√°lido');
                }
            });

            // Campos condicional
            document.querySelectorAll('input[name="sintomas"]').forEach(cb => {
                cb.addEventListener('change', () => {
                    console.log(`[CONDITIONAL] Checkbox de sintomas ${cb.value} alterado`);
                    const checked = document.querySelectorAll('input[name="sintomas"]:checked').length;
                    if (checked > 5) {
                        cb.checked = false;
                        alert('Por favor, selecione apenas at√© 5 sintomas.');
                        console.log('[CONDITIONAL] Limite de 5 sintomas excedido, desmarcado');
                    }
                    document.getElementById('sintomas-outra').classList.toggle('hidden', !Array.from(document.querySelectorAll('input[name="sintomas"]:checked')).some(c => c.value === 'Outro'));
                    document.getElementById('febre-details').classList.toggle('hidden', !Array.from(document.querySelectorAll('input[name="sintomas"]:checked')).some(c => c.value === 'Febre/Hipertermia'));
                    document.getElementById('dor-details').classList.toggle('hidden', !Array.from(document.querySelectorAll('input[name="sintomas"]:checked')).some(c => ['Dor de Cabe√ßa', 'Dor Muscular', 'Dor Abdominal'].includes(c.value)));
                    document.getElementById('tosse-details').classList.toggle('hidden', !Array.from(document.querySelectorAll('input[name="sintomas"]:checked')).some(c => c.value === 'Tosse'));
                    document.getElementById('dispneia-details').classList.toggle('hidden', !Array.from(document.querySelectorAll('input[name="sintomas"]:checked')).some(c => c.value === 'Dispneia'));
                    validateStep();
                });
            });

            document.querySelectorAll('input[name="cronicas"]').forEach(cb => {
                cb.addEventListener('change', () => {
                    console.log(`[CONDITIONAL] Checkbox de cr√¥nicas ${cb.value} alterado`);
                    const checked = document.querySelectorAll('input[name="cronicas"]:checked');
                    if (cb.value === 'Nenhuma' && cb.checked) {
                        checked.forEach(c => {
                            if (c.value !== 'Nenhuma') c.checked = false;
                        });
                        console.log('[CONDITIONAL] Nenhuma selecionada, limpando outras');
                    } else if (checked.length > 0 && Array.from(checked).some(c => c.value !== 'Nenhuma')) {
                        document.querySelector('input[name="cronicas"][value="Nenhuma"]').checked = false;
                        document.getElementById('cronicas-outra').classList.toggle('hidden', !Array.from(checked).some(c => c.value === 'Outra'));
                    }
                    validateStep();
                });
            });

            document.getElementById('tabagismo').addEventListener('change', (e) => {
                console.log(`[CONDITIONAL] Tabagismo alterado para: ${e.target.value}`);
                document.getElementById('tabagismo-detalhes').classList.toggle('hidden', e.target.value === 'Nunca Fumado');
                validateStep();
            });

            document.getElementById('etilismo').addEventListener('change', (e) => {
                console.log(`[CONDITIONAL] Etilismo alterado para: ${e.target.value}`);
                document.getElementById('etilismo-detalhes').classList.toggle('hidden', e.target.value === 'N√£o Bebe');
                validateStep();
            });

            function processarDiagnostico() {
                console.log('[DIAG] Processando diagn√≥stico...');
                const dados = {};
                try {
                    dados.sexo = document.getElementById('sexo').value || 'N√£o informado';
                    dados.idade = parseInt(document.getElementById('idade').value) || 0;
                    dados.peso = parseFloat(document.getElementById('peso').value) || 0.0;
                    dados.altura = parseFloat(document.getElementById('altura').value) || 0.0;
                    dados.imc = (dados.peso / (dados.altura * dados.altura)).toFixed(2) || '0.0';
                    dados.sintomas = Array.from(document.querySelectorAll('input[name="sintomas"]:checked')).map(c => c.value === 'Outro' ? document.getElementById('sintomas-outra').value : c.value).join(', ') || 'Nenhum';
                    dados.temperatura = parseFloat(document.getElementById('temperatura').value) || 0.0;
                    dados.dor_intensidade = parseInt(document.getElementById('dor-intensidade').value) || 0;
                    dados.tosse = document.getElementById('tosse-tipo').value || 'N√£o definido';
                    dados.dispneia_gravidade = parseInt(document.getElementById('dispneia-gravidade').value) || 0;
                    dados.duracao = document.getElementById('duracao').value || 'N√£o informado';
                    dados.desencadeantes = document.getElementById('desencadeantes').value || 'Nenhum';
                    dados.aliviador = document.getElementById('aliviantes').value || 'Nenhum';
                    dados.exposicao = document.getElementById('exposicao').value || 'N√£o definido';
                    dados.cronicas = Array.from(document.querySelectorAll('input[name="cronicas"]:checked')).map(c => c.value === 'Outra' ? document.getElementById('cronicas-outra').value : c.value).join(', ') || 'Nenhuma';
                } catch (e) {
                    console.error(`[ERROR] Falha ao coletar dados: ${e.message}`);
                    return;
                }

                // Sistema de pontua√ß√£o para diagn√≥sticos
                let scores = {
                    influenza: 0.0,
                    covid19: 0.0,
                    bronchitis: 0.0,
                    dengue: 0.0,
                    tension_headache: 0.0
                };

                try {
                    if (dados.sintomas.includes('Febre/Hipertermia')) {
                        scores.influenza += 20;
                        scores.covid19 += 25;
                        scores.dengue += 25;
                        scores.bronchitis += 15;
                        if (dados.temperatura >= 38) {
                            scores.influenza += 25;
                            scores.covid19 += 10;
                            scores.dengue += 15;
                        }
                    }
                    if (dados.sintomas.includes('Tosse')) {
                        scores.influenza += 20;
                        scores.covid19 += 25;
                        scores.bronchitis += 30;
                        if (dados.tosse === 'Seca') {
                            scores.covid19 += 15;
                            scores.influenza += 10;
                        } else if (dados.tosse === 'Produtiva') {
                            scores.bronchitis += 20;
                        }
                    }
                    if (dados.sintomas.includes('Dor de Cabe√ßa')) {
                        scores.influenza += 15;
                        scores.covid19 += 10;
                        scores.dengue += 20;
                        scores.tension_headache += 30;
                        if (dados.dor_intensidade >= 7) {
                            scores.tension_headache += 10;
                            scores.dengue += 10;
                        }
                    }
                    if (dados.sintomas.includes('Dor Muscular')) {
                        scores.influenza += 25;
                        scores.covid19 += 15;
                        scores.dengue += 20;
                        scores.tension_headache += 10;
                    }
                    if (['1-3 Dias', '4-7 Dias'].includes(dados.duracao)) {
                        scores.influenza += 10;
                        scores.covid19 += 10;
                        scores.dengue += 10;
                    }
                    if (dados.exposicao === 'Contato com Doentes') {
                        scores.influenza += 15;
                        scores.covid19 += 15;
                        scores.bronchitis += 10;
                    }
                    if (dados.exposicao === '√Årea de Surtos') {
                        scores.dengue += 15;
                    }

                    console.log('[DIAG] Diagn√≥sticos:', scores);

                    // Gerar sa√≠da de diagn√≥stico
                    const diagnoses = [];
                    if (scores.dengue >= 50) {
                        diagnoses.push({
                            nome: 'Diagn√≥stico',
                            tipo: 'Dengue',
                            probabilidade: Math.min(80, scores.dengue),
                            recomenda√ß√£o: 'Procure um m√©dico para exames de laborat√≥rio (hemograma) e avalia√ß√£o de plaquetas. Hidrate-se bem.'
                        });
                    }
                    if (scores.influenza >= 50) {
                        diagnoses.push({
                            nome: 'Diagn√≥stico',
                            tipo: 'Influenza (Gripe)',
                            probabilidade: Math.min(75, scores.influenza),
                            recomenda√ß√£o: 'Repouse, mantenha-se hidratado e monitore a temperatura. Procure um m√©dico se persistir por mais de 4 dias.'
                        });
                    }
                    if (scores.covid19 >= 50) {
                        diagnoses.push({
                            nome: 'Diagn√≥stico',
                            tipo: 'COVID-19',
                            probabilidade: Math.min(75, scores.covid19),
                            recomenda√ß√£o: 'Realize um teste PCR ou ant√≠geno imediatamente. Isole-se e contate um m√©dico. Monitore oxigena√ß√£o e sintomas respirat√≥rios.'
                        });
                    }
                    if (scores.tension_headache >= 40) {
                        diagnoses.push({
                            nome: 'Diagn√≥stico',
                            tipo: 'Cefaleia Tensional',
                            probabilidade: Math.min(60, scores.tension_headache),
                            recomenda√ß√£o: 'Tente relaxar e se hidratar. Consulte um m√©dico se a dor persistir.'
                        });
                    }

                    diagnoses.sort((a, b) => b.probabilidade - a.probabilidade);

                    let resultado = diagnoses.length > 0
                        ? diagnoses.map(d => `<p><strong>${d.nome}:</strong> ${d.tipo} (${d.probabilidade}% de probabilidade).<br><strong>Recomenda√ß√µes:</strong> ${d.recomenda√ß√£o}</p>`).join('')
                        : '<p>Sem diagn√≥sticos claros com base nos dados fornecidos. Consulte um m√©dico para avalia√ß√£o detalhada.</p>';

                    document.getElementById('resposta-diagnostico').innerHTML = resultado;
                    document.getElementById('resultado-diagnostico').classList.remove('hidden');
                    console.log('[DIAG] Diagn√≥stico processado com sucesso');
                } catch (e) {
                    console.error(`[ERROR] Falha ao processar diagn√≥stico: ${e.message}`);
                    document.getElementById('resposta-diagnostico').innerHTML = '<p>Erro ao processar diagn√≥stico. Tente novamente.</p>';
                    document.getElementById('resultado-diagnostico').classList.remove('hidden');
                }
            }

            // Navega√ß√£o entre passos
            document.querySelectorAll('.next-step').forEach(btn => {
                btn.addEventListener('click', () => {
                    if (validateStep() && currentStep < totalSteps) {
                        currentStep++;
                        updateStep();
                        console.log(`[NAV] Avan√ßando para passo ${currentStep}`);
                    }
                });
            });

            document.querySelectorAll('.prev-step').forEach(btn => {
                btn.addEventListener('click', () => {
                    if (currentStep > 1) {
                        currentStep--;
                        updateStep();
                        console.log(`[NAV] Voltando para passo ${currentStep}`);
                    }
                });
            });

            // Inicializar
            updateStep();
        });
    </script>
</body>
</html>
