<!-- Conte√∫do Principal -->
<section class="container mx-auto px-4 py-16 text-center">
    <h1 class="text-4xl font-bold text-white mb-4 fade-in">Medita√ß√£o Guiada para Relaxamento</h1>
    <p class="text-lg text-gray-600 mb-8 fade-in">Escolha uma medita√ß√£o para aliviar estresse, raiva ou nervosismo. Siga as instru√ß√µes e relaxe com m√∫sica calmante.</p>

    <!-- Medita√ß√£o para Estresse -->
    <div class="neon-box mt-8 fade-in" id="stress-meditation">
        <h2 class="text-2xl font-semibold text-white mb-4">Para Estresse</h2>
        <audio controls class="w-full mb-4" aria-label="Medita√ß√£o guiada para estresse">
            <source src="assets/audio/meditacao-estresse.mp3" type="audio/mpeg">
            Seu navegador n√£o suporta √°udio.
        </audio>
        <p class="text-gray-300 mb-4">
            Sente-se confortavelmente ou deite-se. Feche os olhos suavemente. Coloque uma m√£o no peito e outra no abd√¥men. Inspire pelo nariz por 4 segundos, sentindo o abd√¥men subir. Segure por 4 segundos. Expire lentamente por 6 segundos, liberando a tens√£o. Repita por 5 minutos, deixando pensamentos flu√≠rem sem julgamento.
        </p>
        <button class="futuristic-btn" id="bg-music-stress" aria-label="Ativar m√∫sica de fundo para estresse">üé∂ Ativar M√∫sica de Fundo</button>
    </div>

    <!-- Medita√ß√£o para Raiva -->
    <div class="neon-box mt-8 fade-in" id="anger-meditation">
        <h2 class="text-2xl font-semibold text-white mb-4">Para Raiva</h2>
        <audio controls class="w-full mb-4" aria-label="Medita√ß√£o guiada para raiva">
            <source src="assets/audio/meditacao-raiva.mp3" type="audio/mpeg">
            Seu navegador n√£o suporta √°udio.
        </audio>
        <p class="text-gray-300 mb-4">
            Encontre um lugar tranquilo e sente-se com a coluna ereta. Feche os olhos. Observe a raiva no seu corpo: onde ela est√°? No peito? Nos ombros? Inspire por 4 segundos, trazendo calma. Expire por 8 segundos, visualizando a raiva se dissolvendo como fuma√ßa. Repita por 10 minutos, focando na suavidade da respira√ß√£o.
        </p>
        <button class="futuristic-btn" id="bg-music-anger" aria-label="Ativar m√∫sica de fundo para raiva">üé∂ Ativar M√∫sica de Fundo</button>
    </div>

    <!-- Medita√ß√£o para Nervosismo -->
    <div class="neon-box mt-8 fade-in" id="nervousness-meditation">
        <h2 class="text-2xl font-semibold text-white mb-4">Para Nervosismo</h2>
        <audio controls class="w-full mb-4" aria-label="Medita√ß√£o guiada para nervosismo">
            <source src="assets/audio/meditacao-nervosismo.mp3" type="audio/mpeg">
            Seu navegador n√£o suporta √°udio.
        </audio>
        <p class="text-gray-300 mb-4">
            Deite-se ou sente-se em um lugar calmo. Feche os olhos e relaxe os ombros. Comece escaneando o corpo: observe a testa, o pesco√ßo, os bra√ßos. Inspire por 4 segundos, trazendo paz. Expire por 6 segundos, liberando inquieta√ß√£o. Repita por 7 minutos, movendo a aten√ß√£o dos p√©s √† cabe√ßa.
        </p>
        <button class="futuristic-btn" id="bg-music-nervousness" aria-label="Ativar m√∫sica de fundo para nervosismo">üé∂ Ativar M√∫sica de Fundo</button>
    </div>

    <!-- Recursos Adicionais -->
    <div class="mt-8 max-w-2xl mx-auto fade-in">
        <h3 class="text-xl font-semibold text-white mb-4">Recursos Adicionais</h3>
        <p class="text-gray-300">Quer aprender mais sobre como gerenciar suas emo√ß√µes?</p>
        <a href="https://www.mind.org.uk/information-support/types-of-mental-health-problems/anger/managing-anger/" class="text-[#22d3ee] hover:underline" target="_blank" rel="noopener">Leia sobre gest√£o de raiva no Mind</a>
    </div>

    <!-- Elementos de √Åudio de Fundo -->
    <audio id="background-music-stress" loop preload="auto" style="display:none;">
        <source src="assets/audio/meditacao-estresse.mp3" type="audio/mpeg">
        Seu navegador n√£o suporta √°udio.
    </audio>
    <audio id="background-music-anger" loop preload="auto" style="display:none;">
        <source src="assets/audio/meditacao-raiva.mp3" type="audio/mpeg">
        Seu navegador n√£o suporta √°udio.
    </audio>
    <audio id="background-music-nervousness" loop preload="auto" style="display:none;">
        <source src="assets/audio/meditacao-nervosismo.mp3" type="audio/mpeg">
        Seu navegador n√£o suporta √°udio.
    </audio>
</section>

<!-- Rodap√© (mantido como est√°) -->
<footer class="bg-[rgba(0,0,0,0.8)] text-gray-400 py-8">
    <div class="container mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-8">
        <div>
            <h3 class="text-white font-semibold mb-2">√Ålibis Digitais</h3>
            <p>Solu√ß√µes de bem-estar com tecnologia avan√ßada.</p>
        </div>
        <div>
            <h4 class="text-white font-semibold mb-2">Navegue</h4>
            <ul class="space-y-1">
                <li><a href="scanner.html" class="hover:text-white">In√≠cio</a></li>
                <li><a href="scanner.html" class="hover:text-white">Scanner</a></li>
                <li><a href="blog.html" class="hover:text-white">Blog</a></li>
                <li><a href="medical-ia.html" class="hover:text-white">Diagn√≥sticos M√©dicos</a></li>
                <li><a href="apoio-emocional.html" class="hover:text-white">Apoio Emocional</a></li>
                <li><a href="alibi.html" class="hover:text-white">Criar √Ålibi</a></li>
                <li><a href="planos.html" class="hover:text-white">Planos</a></li>
                <li><a href="suporte.html" class="hover:text-white">Suporte</a></li>
                <li><a href="privacidade.html" class="hover:text-white">Privacidade</a></li>
                <li><a href="termos.html" class="hover:text-white">Termos</a></li>
                <li><a href="politicas.html" class="hover:text-white">Pol√≠ticas</a></li>
            </ul>
        </div>
        <div>
            <h4 class="text-white font-semibold mb-2">Contato</h4>
            <ul class="space-y-1">
                <li><a href="mailto:contato@alibisdigitais.com.br" class="hover:text-white">E-mail: contato@alibisdigitais.com.br</a></li>
                <li><a href="https://wa.me/5511912345678" class="hover:text-white">WhatsApp: (11) 91234-5678</a></li>
            </ul>
        </div>
    </div>
    <div class="text-center mt-4">
        <p class="text-sm">¬© 2025 √Ålibis Digitais. Todos os direitos reservados.</p>
    </div>
</footer>

<script>
    // Inicializar particles.js
    particlesJS('particles-js', {
        particles: {
            number: { value: 80, density: { enable: true, value_area: 800 } },
            color: { value: '#22d3ee' },
            shape: { type: 'circle' },
            opacity: { value: 0.3, random: true },
            size: { value: 2, random: true },
            line_linked: { enable: true, distance: 100, color: '#22d3ee', opacity: 0.2, width: 1 },
            move: { enable: true, speed: 1, direction: 'none', random: false, straight: false, out_mode: 'out' }
        },
        interactivity: {
            detect_on: 'canvas',
            events: { onhover: { enable: true, mode: 'repulse' }, onclick: { enable: true, mode: 'push' }, resize: true },
            modes: { repulse: { distance: 100 }, push: { particles_nb: 4 } }
        }
    });

    // Gerenciar navega√ß√£o e √°udio
    document.addEventListener('DOMContentLoaded', () => {
        // Navega√ß√£o mobile
        const hamburgerMenu = document.getElementById('hamburger-menu');
        const mobileMenu = document.getElementById('mobile-menu');
        const servicesToggle = document.getElementById('services-toggle');
        const servicesMenu = document.getElementById('services-menu');

        if (hamburgerMenu && mobileMenu) {
            hamburgerMenu.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
        }

        if (servicesToggle && servicesMenu) {
            servicesToggle.addEventListener('click', () => {
                servicesMenu.classList.toggle('hidden');
            });
        }

        // Gerenciar √°udio
        const bgMusicStress = document.getElementById('background-music-stress');
        const bgMusicAnger = document.getElementById('background-music-anger');
        const bgMusicNervousness = document.getElementById('background-music-nervousness');
        const meditationAudios = document.querySelectorAll('audio:not([id^=background-music])');
        const bgMusicButtons = document.querySelectorAll('[id^=bg-music-]');

        // Inicializar volume e garantir que m√∫sicas de fundo n√£o toquem automaticamente
        [bgMusicStress, bgMusicAnger, bgMusicNervousness].forEach(audio => {
            audio.volume = 0.5; // Volume inicial ajustado
            audio.pause();
            audio.currentTime = 0;
        });

        // Fun√ß√£o para fade-out
        function fadeOut(audio, duration = 1500) {
            if (audio.paused) return Promise.resolve();
            return new Promise(resolve => {
                const initialVolume = audio.volume;
                const steps = 20;
                const interval = duration / steps;
                let currentStep = 0;

                const fadeInterval = setInterval(() => {
                    currentStep++;
                    audio.volume = initialVolume * (1 - currentStep / steps);
                    if (currentStep >= steps) {
                        clearInterval(fadeInterval);
                        audio.pause();
                        audio.currentTime = 0;
                        audio.volume = initialVolume;
                        resolve();
                    }
                }, interval);
            });
        }

        // Pausar m√∫sica de fundo com fade-out quando uma medita√ß√£o toca
        meditationAudios.forEach(audio => {
            audio.addEventListener('play', async () => {
                [bgMusicStress, bgMusicAnger, bgMusicNervousness].forEach(async bgAudio => {
                    if (!bgAudio.paused) {
                        await fadeOut(bgAudio);
                        bgMusicButtons.forEach(btn => {
                            btn.textContent = 'üé∂ Ativar M√∫sica de Fundo';
                        });
                    }
                });
            });
        });

        // Gerenciar bot√µes de m√∫sica de fundo
        bgMusicButtons.forEach(button => {
            button.addEventListener('click', async () => {
                const audioMap = {
                    'bg-music-stress': bgMusicStress,
                    'bg-music-anger': bgMusicAnger,
                    'bg-music-nervousness': bgMusicNervousness
                };
                const currentAudio = audioMap[button.id];

                if (currentAudio.paused) {
                    // Pausar todas as medita√ß√µes e outras m√∫sicas de fundo
                    meditationAudios.forEach(audio => {
                        if (!audio.paused) {
                            audio.pause();
                            audio.currentTime = 0;
                        }
                    });
                    [bgMusicStress, bgMusicAnger, bgMusicNervousness].forEach(bgAudio => {
                        if (bgAudio !== currentAudio && !bgAudio.paused) {
                            bgAudio.pause();
                            bgAudio.currentTime = 0;
                        }
                    });

                    currentAudio.volume = 0.5; // Restaurar volume
                    currentAudio.play();
                    button.textContent = 'üîá Desativar M√∫sica de Fundo';
                } else {
                    await fadeOut(currentAudio);
                    button.textContent = 'üé∂ Ativar M√∫sica de Fundo';
                }
            });
        });

        // Destacar medita√ß√£o baseada em query parameter
        const urlParams = new URLSearchParams(window.location.search);
        const emotion = urlParams.get('emotion');
        const meditationMap = {
            'anger': 'anger-meditation',
            'sadness': 'stress-meditation',
            'fear': 'nervousness-meditation'
        };
        if (emotion && meditationMap[emotion]) {
            const section = document.getElementById(meditationMap[emotion]);
            if (section) {
                section.scrollIntoView({ behavior: 'smooth' });
                section.classList.add('pulse');
            }
        }

        // Efeito ripple nos bot√µes
        const buttons = document.querySelectorAll('.futuristic-btn');
        buttons.forEach(button => {
            button.addEventListener('click', (e) => {
                const ripple = document.createElement('span');
                ripple.classList.add('ripple');
                const rect = button.getBoundingClientRect();
                const size = Math.max(rect.width, rect.height);
                ripple.style.width = ripple.style.height = `${size}px`;
                ripple.style.left = `${e.clientX - rect.left - size / 2}px`;
                ripple.style.top = `${e.clientY - rect.top - size / 2}px`;
                button.appendChild(ripple);
                ripple.addEventListener('animationend', () => ripple.remove());
            });
        });
    });
</script>
