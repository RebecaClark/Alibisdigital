  <section class="glassmorphic-card mb-8">
        <h2 class="section-title">Monitoramento Emocional Quântico</h2>
        <p class="text-gray-300 mb-4 text-center">Ative sua câmera para uma análise em tempo real do seu estado emocional.</p>
        <div class="flex flex-col items-center">
            <video id="camera-feed" autoplay playsinline></video>
            <canvas id="capture-canvas" class="hidden"></canvas>
            <input type="text" id="user-context" placeholder="Como você está se sentindo?" class="w-full rounded-md bg-gray-800 text-white placeholder-gray-500 p-3 mb-3">
            <button id="analyze-emotion-btn" class="futuristic-btn">Analisar Emoção</button>
            <div id="emotion-result" class="mt-4 text-center"></div>
            <div id="wellbeing-advice" class="text-sm text-gray-400 mt-2 text-center"></div>
        </div>
    </section>

    <section class="glassmorphic-card mb-8">
        <h2 class="section-title">Registro de Hábitos</h2>
        <div id="habit-tracker">
            </div>
        <button onclick="addHabit()" class="futuristic-btn mt-4">Adicionar Hábito</button>
    </section>

    <section class="glassmorphic-card mb-8">
        <h2 class="section-title">Ferramentas de Bem-Estar e Relaxamento</h2>
        <div id="wellbeing-tools" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <h3 class="text-xl font-semibold text-white mb-2">Meditações Guiadas</h3>
                <div id="guided-meditations">
                    </div>
            </div>
            <div>
                <h3 class="text-xl font-semibold text-white mb-2">Histórias para Dormir</h3>
                <div id="sleep-stories">
                    </div>
            </div>
            <div>
                <h3 class="text-xl font-semibold text-white mb-2">Alongamento e Yoga</h3>
                <div id="stretching-yoga">
                    </div>
            </div>
            <div>
                <h3 class="text-xl font-semibold text-white mb-2">Respiração e Sons Relaxantes</h3>
                <div id="breathing-sounds">
                    </div>
            </div>
        </div>
    </section>

    <section class="glassmorphic-card mb-8">
        <h2 class="section-title">Comunidade Órbita</h2>
        <div id="community-orbita">
            <p class="text-gray-300">Conecte-se com outros membros da comunidade (em breve!).</p>
        </div>
    </section>

    <section class="glassmorphic-card mb-8">
        <h2 class="section-title">Últimos Artigos e Insights</h2>
        <div id="latest-articles">
            <p class="text-gray-300">Leia nossos artigos mais recentes sobre bem-estar e autocuidado (em breve!).</p>
        </div>
    </section>

    <footer class="py-4 text-center text-gray-500">
        <p>&copy; 2024 ÓRBITA Quântica. Todos os direitos reservados.</p>
    </footer>
</div>

<script>
    particlesJS('particles-js', {
        particles: { number: { value: 80, density: { enable: true, value_area: 800 } }, color: { value: '#6d28d9' }, shape: { type: 'circle' }, opacity: { value: 0.5, random: true }, size: { value: 3, random: true }, line_linked: { enable: true, distance: 150, color: '#a7f3d0', opacity: 0.4, width: 1 }, move: { enable: true, speed: 2, direction: 'none', random: false, straight: false, out_mode: 'out', bounce: false } },
        interactivity: { detect_on: 'canvas', events: { onhover: { enable: true, mode: 'grab' }, onclick: { enable: true, mode: 'push' }, resize: true }, modes: { grab: { distance: 200, line_linked: { opacity: 1 } }, push: { particles_nb: 4 } } }
    });

    // ==================================================================================================
    // !!! AVISO IMPORTANTE DE SEGURANÇA !!!
    // Estas chaves de API estão expostas no código do frontend APENAS PARA FINS DE TESTE.
    // EM PRODUÇÃO, ELAS DEVEM SER MOVIDAS PARA UM BACKEND SEGURO PARA PROTEGER SUAS CREDENCIAIS.
    // Após os testes, revogue estas chaves e crie novas para uso no backend.
    // ==================================================================================================
    const FACE_API_KEY = 'YOUR_FACE_API_KEY'; // Substitua pela sua chave da Face++
    const FACE_API_SECRET = 'YOUR_FACE_API_SECRET'; // Substitua pelo seu segredo da Face++
    const OPENAI_API_KEY = 'YOUR_OPENAI_API_KEY'; // Substitua pela sua chave da OpenAI
    // ==================================================================================================

    const cameraFeed = document.getElementById('camera-feed');
    const captureCanvas = document.getElementById('capture-canvas');
    const analyzeEmotionBtn = document.getElementById('analyze-emotion-btn');
    const emotionResultDiv = document.getElementById('emotion-result');
    const wellbeingAdviceDiv = document.getElementById('wellbeing-advice');
    const userContextInput = document.getElementById('user-context');

    let cameraStream;

    async function startCamera() {
        try {
            cameraStream = await navigator.mediaDevices.getUserMedia({ video: true });
            cameraFeed.srcObject = cameraStream;
        } catch (error) {
            console.error("Erro ao acessar a câmera:", error);
            emotionResultDiv.textContent = "Erro ao acessar a câmera.";
        }
    }

    function captureFrame() {
        if (!cameraFeed || !captureCanvas) return null;
        captureCanvas.width = cameraFeed.videoWidth;
        captureCanvas.height = cameraFeed.videoHeight;
        const context = captureCanvas.getContext('2d');
        context.drawImage(cameraFeed, 0, 0, captureCanvas.width, captureCanvas.height);
        return captureCanvas.toDataURL('image/jpeg');
    }

    async function analyzeEmotion() {
        if (!FACE_API_KEY || !FACE_API_SECRET || !OPENAI_API_KEY) {
            emotionResultDiv.textContent = "Chaves de API não configuradas.";
            return;
        }

        const imageData = captureFrame();
        if (!imageData) {
            emotionResultDiv.textContent = "Não foi possível capturar a imagem.";
            return;
        }

        emotionResultDiv.textContent = "Analisando emoção...";
        wellbeingAdviceDiv.textContent = "";

        const formData = new URLSearchParams();
        formData.append('api_key', FACE_API_KEY);
        formData.append('api_secret', FACE_API_SECRET);
        formData.append('image_base64', imageData.split(',')[1]);
        formData.append('return_emotion', 1);

        try {
            const faceApiResponse = await fetch('[https://api-us.faceplusplus.com/facepp/v3/detect](https://api-us.faceplusplus.com/facepp/v3/detect)', {
                method: 'POST',
                body: formData,
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded'
                }
            });
            const faceData = await faceApiResponse.json();

            if (faceData.faces && faceData.faces.length > 0) {
                const emotionData = faceData.faces

                await getAiDiagnosis(emotionData, userContextInput.value);

            } else {
                emotionResultDiv.textContent = "Nenhum rosto detectado.";
                wellbeingAdviceDiv.textContent = "";
            }

        } catch (error) {
            console.error("Erro na API da Face++:", error);
            emotionResultDiv.textContent = "Erro na análise da emoção.";
            wellbeingAdviceDiv.textContent = "Por favor, tente novamente.";
        }
    }

    async function getAiDiagnosis(facialData, userContext) {
        emotionResultDiv.textContent = "Obtendo diagnóstico da IA...";

        const dominantEmotion = Object.keys(facialData).reduce((a, b) => facialData.emotion.a > facialData.emotion.b ? a : b);

        const prompt = `
            Analise as seguintes emoções faciais detectadas e o contexto fornecido pelo usuário para determinar o estado emocional geral. Forneça uma emoção principal concisa e uma breve sugestão de bem-estar relacionada.

            Emoções Faciais (confiança em %): ${JSON.stringify(facialData)}
            Contexto do Usuário: "${userContext}"

            Responda com um objeto JSON no seguinte formato:
            {"emotion": "emoção principal", "advice": "breve sugestão de bem-estar"}
        `;

        try {
            const openaiResponse = await fetch('[https://api.openai.com/v1/chat/completions](https://api.openai.com/v1/chat/completions)', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${OPENAI_API_KEY}`
                },
                body: JSON.stringify({
                    model: 'gpt-3.5-turbo-1106',
                    messages: [{ role: 'user', content: prompt }],
                    response_format: { type: "json_object" }
                })
            });

            const aiData = await openaiResponse.json();
            if (aiData.choices && aiData.choices.length > 0 && aiData.choices
) { tentar { diagnóstico constante = JSON.parse(aiData.choices

);
emotionResultDiv.textContent = Você parece estar se sentindo: ${diagnosis.emotion};
wellbeingAdviceDiv.textContent = diagnosis.advice || "Esperamos que se sinta melhor em breve!";
} catch (e) {
console.error("Erro ao parsear JSON da OpenAI:", e);
emotionResultDiv.textContent = Você parece estar se sentindo: ${dominantEmotion};
wellbeingAdviceDiv.textContent = "Houve um problema ao obter uma sugestão da IA.";
}
} else {
console.warn("Resposta da OpenAI incompleta:", aiData);
emotionResultDiv.textContent = Você parece estar se sentindo: ${dominantEmotion};
wellbeingAdviceDiv.textContent = "Não foi possível obter uma sugestão da IA neste momento.";
}

        } catch (error) {
            console.error("Erro na API da OpenAI:", error);
            emotionResultDiv.textContent = `Você parece estar se sentindo: ${dominantEmotion}`;
            wellbeingAdviceDiv.textContent = "Houve um problema ao conectar com a IA.";
        }
    }

    // --- Resto das funcionalidades (Registro de Hábitos, Bem-Estar, etc.) ---
    let habits = [];
    const habitTrackerDiv = document.getElementById('habit-tracker');

    function loadHabits() {
        const storedHabits = localStorage.getItem('habits');
        if (storedHabits) {
            habits = JSON.parse(storedHabits);
            renderHabits();
        }
    }

    function saveHabits() {
        localStorage.setItem('habits', JSON.stringify(habits));
    }

    function renderHabits() {
        habitTrackerDiv.innerHTML = '';
        habits.forEach((habit, index) => {
            const habitDiv = document.createElement('div');
            habitDiv.classList.add('habit-tracker-item');
            habitDiv.innerHTML = `
                <span>${habit.name}</span>
                <button class="habit-button ${habit.completed ? 'bg-green-500 hover:bg-green-600' : ''}"
                        onclick="toggleHabit(${index})">${habit.completed ? 'Concluído' : 'Marcar'}</button>
            `;
            habitTrackerDiv.appendChild(habitDiv);
        });
    }

    function addHabit() {
        const habitName = prompt("Qual hábito você gostaria de registrar?");
        if (habitName) {
            habits.push({ name: habitName, completed: false });
            saveHabits();
            renderHabits();
        }
    }

    function toggleHabit(index) {
        habits
.concluído = !hábitos

.concluído; salvarHábitos(); renderizarHábitos(); }

    const guidedMeditationsDiv = document.getElementById('guided-meditations');
    const sleepStoriesDiv = document.getElementById('sleep-stories');
    const stretchingYogaDiv = document.getElementById('stretching-yoga');
    const breathingSoundsDiv = document.getElementById('breathing-sounds');

    const meditations = [
        { title: "Respiração Consciente", content: "Concentre-se na sua respiração..." },
        { title: "Relaxamento Muscular Progressivo", content: "Tense e relaxe cada grupo muscular..." }
    ];

    const stories = [
        { title: "A Floresta Encantada", content: "Era uma vez, numa floresta..." },
        { title: "O Céu Estrelado", content: "Olhe para o céu noturno..." }
    ];

    const exercises = [
        { title: "Alongamento Matinal", content: "Comece com alongamentos leves..." },
        { title: "Sequência de Yoga Suave", content: "Faça a saudação ao sol..." }
    ];

    const sounds = [
        { title: "Sons da Natureza", src: "#" },
        { title: "Ondas do Mar", src: "#" }
    ];

    function renderTools(container, items, type) {
        items.forEach(item => {
            const div = document.createElement('div');
            div.classList.add('meditation-item'); // Use uma classe comum e ajuste conforme necessário
            let content = `<h4 class="font-semibold text-white">${item.title}</h4>`;
            if (type === 'meditation' || type === 'story' || type === 'exercise') {
                content += `<p class="text-gray-300 mt-2">${item.content.substring(0, 100)}... <a href="#" class="text-blue-400 hover:underline">Ler mais</a></p>`;
            } else if (type === 'sound') {
                content += `<audio controls src="${item.src}" class="w-full"></audio>`;
            }
            div.innerHTML = content;
            container.appendChild(div);
        });
    }

    document.addEventListener('DOMContentLoaded', () => {
        startCamera();
        loadHabits();
        renderTools(guidedMeditationsDiv, meditations, 'meditation');
        renderTools(sleepStoriesDiv, stories, 'story');
        renderTools(stretchingYogaDiv, exercises, 'exercise');
        renderTools(breathingSoundsDiv, sounds, 'sound');

        analyzeEmotionBtn.addEventListener('click', analyzeEmotion);
    });
</script>
